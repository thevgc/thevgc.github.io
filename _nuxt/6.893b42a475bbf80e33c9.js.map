{"version":3,"sources":["C:/Users/djalx/Desktop/thevgc/helpers\\anim.js","C:\\Users\\djalx\\Desktop\\thevgc\\components\\App\\AppBackground.vue","C:/Users/djalx/Desktop/thevgc/helpers\\util.js","webpack:///./components/App/AppBackground.vue?0f87","C:/Users/djalx/Desktop/thevgc/helpers\\simplex.js","components\\App/AppBackground.vue","C:/Users/djalx/Desktop/thevgc/helpers\\configs.js","C:/Users/djalx/Desktop/thevgc/helpers\\input.js","C:/Users/djalx/Desktop/thevgc/helpers\\terramap.js","C:/Users/djalx/Desktop/thevgc/helpers\\world.js","C:/Users/djalx/Desktop/thevgc/helpers\\water.js","C:/Users/djalx/Desktop/thevgc/helpers\\terrain.js","C:/Users/djalx/Desktop/thevgc/helpers\\loader.js","C:/Users/djalx/Desktop/thevgc/helpers\\browser.js","C:/Users/djalx/Desktop/thevgc/helpers\\grass.js","C:/Users/djalx/Desktop/thevgc/helpers\\player.js","C:/Users/djalx/Desktop/thevgc/helpers\\notification.js","C:/Users/djalx/Desktop/thevgc/helpers\\fps.js","C:/Users/djalx/Desktop/thevgc/helpers\\gmath.js","webpack:///./components/App/AppBackground.vue?39de","C:/Users/djalx/Desktop/thevgc/helpers\\skydome.js","webpack:///./components/App/AppBackground.vue?df3d","C:/Users/djalx/Desktop/thevgc/helpers\\heightfield.js","C:/Users/djalx/Desktop/thevgc/helpers\\vec.js","C:/Users/djalx/Desktop/thevgc/helpers\\logger.js"],"names":["el","dur","complete","fade","PRECISION","o0","o1","startT","Date","now","prevO","Object","__WEBPACK_IMPORTED_MODULE_0__helpers_gmath__","toString","style","opacity","requestAnimationFrame","fadeLoop","t","o","__WEBPACK_IMPORTED_MODULE_2__node_modules_vue_loader_lib_runtime_component_normalizer__","__webpack_require__","disposed","__vue_styles__","context","Component","__WEBPACK_IMPORTED_MODULE_0__babel_loader_babelrc_false_cacheDirectory_false_presets_C_Users_djalx_Desktop_thevgc_node_modules_babel_preset_vue_app_dist_index_common_js_targets_ie_9_uglify_true_node_modules_vue_loader_lib_selector_type_script_index_0_AppBackground_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0e175888_hasScoped_false_optionsId_0_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_AppBackground_vue__","options","__file","__webpack_exports__","id","document","getElementById","content","module","i","locals","exports","add","default","sourceMap","xin","yin","n0","n1","n2","s","F2","Math","floor","j","G2","x0","y0","i1","j1","x1","y1","x2","y2","gi0","gradP","perm","gi1","gi2","t0","dot2","t1","t2","Grad","x","y","z","__WEBPACK_IMPORTED_MODULE_0_C_Users_djalx_Desktop_thevgc_node_modules_babel_runtime_helpers_classCallCheck___default","this","sqrt","Array","grad3","p","seed","v","name","data","assets","canvas","cfg","cfgId","errors","loading","loaded","world","numGrassBlades","grassPatchRadius","width","height","antialias","props","computed","methods","setupCameras","addAmbient","color","createLine","detectWebGL","createElement","getContext","e","animate","loadAssets","loader","__WEBPACK_IMPORTED_MODULE_0__helpers_loader__","load","text","url","images","textures","onAssetsLoaded","onAssetsProgress","onAssetsError","getAssets","__WEBPACK_IMPORTED_MODULE_2__helpers_browser__","isMobile","any","__WEBPACK_IMPORTED_MODULE_3__helpers_configs__","console","log","a","_this","setTimeout","start","pct","push","setDimensions","cb","addListeners","animationBusListeners","resize","$refs","container","clientWidth","clientHeight","__WEBPACK_IMPORTED_MODULE_1__helpers_util_js__","__WEBPACK_IMPORTED_MODULE_5__helpers_world__","doFrame","mounted","window","addEventListener","__WEBPACK_IMPORTED_MODULE_4__helpers_input__","mobile","blades","depth","laptop","desktop","desktop2","gamerig","initialized","onKeyDown","onKeyUp","code","fn","keyPressListeners","state","up","down","left","right","forward","back","pitchup","pitchdown","keyStates","map","b","setState","k","cs","ev","keyCode","codeStr","hf","lightDir","imgWind","canvasWidth","xCount","canvasHeight","yCount","ctx","imgData","getImageData","buf","vnorms","vtxNormals","w","h","n","__WEBPACK_IMPORTED_MODULE_1__helpers_vec__","create","tStart","iSrc","iDst","round","heights","maxHeight","ni","light","max","dot","computeShade","computeData","naturalWidth","naturalHeight","ctxSrc","drawImage","windData","addWindData","putImageData","tex","__WEBPACK_IMPORTED_MODULE_3_three__","wrapS","wrapT","needsUpdate","_v","ix","iy","hdir","normalize","zstep","length","qx","qy","sampleHeight","displayWidth","displayHeight","__WEBPACK_IMPORTED_MODULE_0__util__","renderer","__WEBPACK_IMPORTED_MODULE_14_three__","clearColor","clearAlpha","alpha","Error","fogDist","grassFogDist","camera","VIEW_DEPTH","meshes","terrain","grass","sky","water","sunFlare","scene","fog","__WEBPACK_IMPORTED_MODULE_2__helpers_vec__","to24bit","FOG_COLOR","rotation","order","PI","set","camHolder","hfImg","heightmap","hfCellSize","HEIGHTFIELD_SIZE","heightMapScale","HEIGHTFIELD_HEIGHT","heightField","__WEBPACK_IMPORTED_MODULE_7__helpers_heightfield__","cellSize","minHeight","image","undefined","terraMap","__WEBPACK_IMPORTED_MODULE_10__helpers_terramap__","LIGHT_DIR","noise","windIntensity","WIND_DEFAULT","__WEBPACK_IMPORTED_MODULE_8__helpers_grass__","numBlades","radius","texture","vertScript","fragScript","heightMap","fogColor","fogFar","grassFogFar","grassColor","GRASS_COLOR","transitionLow","BEACH_TRANSITION_LOW","transitionHigh","BEACH_TRANSITION_HIGH","renderOrder","terra","__WEBPACK_IMPORTED_MODULE_9__helpers_terrain__","terrain1","terrain2","mesh","__WEBPACK_IMPORTED_MODULE_6__helpers_skydome__","skydome","position","__WEBPACK_IMPORTED_MODULE_11__helpers_water__","envMap","skyenv","waterLevel","WATER_LEVEL","waterColor","WATER_COLOR","fogNear","transparent","depthTest","depthWrite","GLARE_COLOR","blending","visible","player","__WEBPACK_IMPORTED_MODULE_12__helpers_player__","prevT","simT","__WEBPACK_IMPORTED_MODULE_3__helpers_logger__","charCodeAt","pos","mat","material","uniforms","value","min","WIND_MAX","fpsMon","__WEBPACK_IMPORTED_MODULE_13__helpers_fps__","setSize","aspect","updateProjectionMatrix","_hinfo","update","dt","INTRO_FADE_DUR","pow","updateFade","ppos","pdir","dir","pyaw","yaw","ppitch","pitch","proll","roll","groundHeight","toFixed","fps","drawPos","cos","sin","copy","dy","abs","__WEBPACK_IMPORTED_MODULE_1__gmath__","GLARE_YAW","dp","GLARE_PITCH","sunVisAngle","GLARE_RANGE","glare","MAX_GLARE","updateGlare","curT","MAX_TIMESTEP","render","opts","__WEBPACK_IMPORTED_MODULE_1_three__","minFilter","magFilter","generateMipmaps","time","type","viewPos","__WEBPACK_IMPORTED_MODULE_0__vec__","toArray","vertexShader","fragmentShader","frustumCulled","_time","vp","xCellCount","MAX_INDICES","yCellCount","xSize","ySize","texs","forEach","anisotropy","htex","vtxBufs","xcount","ycount","Float32Array","uv","u","TEX_SCALE","createVtxBuffers","idBuf","idSize","Uint16Array","Uint32Array","xc","yc","createIdBuffer","geo","addAttribute","setIndex","hscale","replace","offset","uvOffset","map1","map2","__WEBPACK_IMPORTED_MODULE_0__helpers_vec__","createMesh","ox","oy","isLoading","totalToLoad","numLoaded","numFailed","success_cb","progress_cb","error_cb","done_cb","ok","tryDone","doProgress","doError","loadText","ad","req","XMLHttpRequest","overrideMimeType","onreadystatechange","readyState","status","responseText","open","send","loadImage","img","Image","onload","onerror","src","assetList","success","progress","error","done","__WEBPACK_IMPORTED_MODULE_0_three__","navigator","userAgent","match","bb","ios","ff","Android","BlackBerry","iOS","Opera","Windows","FireFox","isStandalone","standalone","external","msIsSiteMode","matchMedia","matches","buffers","vindex","BLADE_VERTS","shape","index","BLADE_INDICES","vc1","vc2","seg","BLADE_SEGS","initBladeIndices","patchRadius","random","initBladeOffsetVerts","__WEBPACK_IMPORTED_MODULE_2__helpers_simplex__","BLADE_WIDTH","BLADE_HEIGHT_MIN","BLADE_HEIGHT_MAX","initBladeShapeVerts","initBladeIndexVerts","__WEBPACK_IMPORTED_MODULE_4_three__","boundingSphere","clone","camDir","camPos","waterHeight","mode","MODE_MAN","DEFAULT_HEIGHT","vel","yawVel","pitchVel","rollVel","floatHeight","__WEBPACK_IMPORTED_MODULE_2__helpers_input__","nextMode","MODE_AUTO","__WEBPACK_IMPORTED_MODULE_5__helpers_logger__","__WEBPACK_IMPORTED_MODULE_3__helpers_notification__","MODE_FLY","_a","_d","_p1","_p2","_p3","NUM_MODES","autoPos","r","MOVE_RANGE","ft","yaw0","pitch0","BOB_RANGE","DEFAULT_PITCH","__WEBPACK_IMPORTED_MODULE_4__helpers_heightfield__","h1","h2","h3","floatVel","FLOAT_VEL","MIN_HEIGHT","dyaw","dpitch","updateAuto","ra","ROLL_ACCEL","rr","ROLL_RESIST","rf","ROLL_FRIC","ya","YAW_ACCEL","yd","YAW_DRAG","pa","PITCH_ACCEL","pr","PITCH_RESIST","pf","PITCH_FRIC","ACCEL","absVel","setLength","DRAG","MAX_HEIGHT","VACCEL","VDRAG","updateDrone","MAN_YAWVEL","MAN_PITCHVEL","MAN_MAXPITCH","MAN_VEL","MAN_ZVEL","updateManual","d","getMode","msg","elTxt","__WEBPACK_IMPORTED_MODULE_0__helpers_util__","textContent","notifying","display","__WEBPACK_IMPORTED_MODULE_1__helpers_anim__","num","arguments","ticks","sum","f","places","a0","a1","pmod","PI2","sign","m","escape","lats","lngs","rotateX","rotateZ","side","staticRenderFns","_h","$createElement","_c","_self","ref","attrs","_withStripped","info","faceNormals","heightRange","calcFaceNormals","computeVertexNormal","calcVertexNormals","genFromImg","wrap","infoAt","_hi","csz","hxc","normals","v0","v1","ih","cross","vx","vy","fnorms","hi","px","py","z0","getPlaneZ","Vec2","out","l","dist","dx","det","rotate","c","rotateCS","reflect","Vec3","dz","ax","ay","az","bx","by","bz","Color","g","txt"],"mappings":"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","file":"6.893b42a475bbf80e33c9.js","sourcesContent":["'use strict';\r\n\r\nimport {\r\n  roundFrac\r\n} from '@/helpers/gmath';\r\n\r\nconst PRECISION = 5;\r\n\r\n/**\r\n * Fades element from o0 opacity to o1 opacity in dur milliseconds.\r\n * Invokes complete callback when done.\r\n */\r\nexport function fade(el, o0, o1, dur, complete) {\r\n  const startT = Date.now();\r\n  let prevO = roundFrac(o0, PRECISION).toString();\r\n  el.style.opacity = prevO;\r\n\r\n  function fadeLoop() {\r\n    const t = Date.now() - startT;\r\n    if (t >= dur) {\r\n      el.style.opacity = roundFrac(o1, PRECISION).toString();\r\n      if (complete) complete();\r\n    } else {\r\n      // round off so style value isn't too weird\r\n      const o = roundFrac(o0 + t / dur * (o1 - o0), PRECISION).toString();\r\n      if (o !== prevO) {\r\n        // only update style if value has changed\r\n        el.style.opacity = o;\r\n        prevO = o;\r\n      }\r\n      requestAnimationFrame(fadeLoop);\r\n    }\r\n  }\r\n  requestAnimationFrame(fadeLoop);\r\n}\r\n\r\n/**\r\n * Go from 0 opacity to 1 in dur milliseconds.\r\n * @param el Element to fade\r\n * @param dur Fade duration in ms\r\n * @param complete Callback on complete\r\n */\r\nexport function fadeIn(el, dur, complete) {\r\n  fade(el, 0, 1, dur, complete);\r\n}\r\n\r\n/**\r\n * Go from 1 opacity to 0 in dur milliseconds.\r\n * @param el Element to fade\r\n * @param dur Fade duration in ms\r\n * @param complete Callback on complete\r\n */\r\nexport function fadeOut(el, dur, complete) {\r\n  fade(el, 1, 0, dur, complete);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/anim.js","var disposed = false\nfunction injectStyle (context) {\n  if (disposed) return\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader?{\\\"sourceMap\\\":false}!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true,\\\"importLoaders\\\":1,\\\"alias\\\":{\\\"/assets\\\":\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\assets\\\",\\\"/static\\\":\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\static\\\"}}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AppBackground.vue\")\n}\n/* script */\nexport * from \"!!babel-loader?{\\\"babelrc\\\":false,\\\"cacheDirectory\\\":false,\\\"presets\\\":[[\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\node_modules\\\\\\\\babel-preset-vue-app\\\\\\\\dist\\\\\\\\index.common.js\\\",{\\\"targets\\\":{\\\"ie\\\":9,\\\"uglify\\\":true}}]]}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AppBackground.vue\"\nimport __vue_script__ from \"!!babel-loader?{\\\"babelrc\\\":false,\\\"cacheDirectory\\\":false,\\\"presets\\\":[[\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\node_modules\\\\\\\\babel-preset-vue-app\\\\\\\\dist\\\\\\\\index.common.js\\\",{\\\"targets\\\":{\\\"ie\\\":9,\\\"uglify\\\":true}}]]}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AppBackground.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e175888\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./AppBackground.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"components\\\\App\\\\AppBackground.vue\"\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-0e175888\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-0e175888\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/App/AppBackground.vue\n// module id = 0oZQ\n// module chunks = 6","'use strict';\r\n\r\nexport function $e(id) {\r\n  return document.getElementById(id);\r\n}\r\n\r\nexport function $i(id) {\r\n  return document.getElementById(id);\r\n}\r\n\r\nexport function detectWebGL() {\r\n  try {\r\n    const canvas = document.createElement('canvas');\r\n    return (!!canvas.getContext('webgl') || !!canvas.getContext('experimental-webgl'));\r\n  } catch (e) {\r\n    return null;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/util.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":false,\\\"minimize\\\":true,\\\"importLoaders\\\":1,\\\"alias\\\":{\\\"/assets\\\":\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\assets\\\",\\\"/static\\\":\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\static\\\"}}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./AppBackground.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6221f701\", content, false, {\"sourceMap\":false});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":false,\\\"minimize\\\":true,\\\"importLoaders\\\":1,\\\"alias\\\":{\\\"/assets\\\":\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\assets\\\",\\\"/static\\\":\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\static\\\"}}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./AppBackground.vue\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":false,\\\"minimize\\\":true,\\\"importLoaders\\\":1,\\\"alias\\\":{\\\"/assets\\\":\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\assets\\\",\\\"/static\\\":\\\"C:\\\\\\\\Users\\\\\\\\djalx\\\\\\\\Desktop\\\\\\\\thevgc\\\\\\\\static\\\"}}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./AppBackground.vue\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader?{\"sourceMap\":false}!./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true,\"importLoaders\":1,\"alias\":{\"/assets\":\"C://Users//djalx//Desktop//thevgc//assets\",\"/static\":\"C://Users//djalx//Desktop//thevgc//static\"}}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"scoped\":false,\"sourceMap\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./components/App/AppBackground.vue\n// module id = 9pcH\n// module chunks = 6","/*\r\n * A speed-improved perlin and simplex noise algorithms for 2D.\r\n *\r\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\r\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\r\n * Better rank ordering method by Stefan Gustavson in 2012.\r\n * Converted to Javascript by Joseph Gentle.\r\n *\r\n * Version 2012-03-09\r\n *\r\n * This code was placed in the public domain by its original author,\r\n * Stefan Gustavson. You may use it as you see fit, but\r\n * attribution is appreciated.\r\n *\r\n * --------------------\r\n * TypeScriptified 2016\r\n */\r\n\r\nclass Grad {\r\n  constructor(x, y, z) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n  }\r\n\r\n  dot2(x, y) {\r\n    return this.x * x + this.y * y;\r\n  }\r\n\r\n  dot3(x, y, z) {\r\n    return this.x * x + this.y * y + this.z * z;\r\n  }\r\n}\r\n\r\nconst F2 = 0.5 * (Math.sqrt(3) - 1);\r\nconst G2 = (3 - Math.sqrt(3)) / 6;\r\n\r\nconst perm = new Array(512);\r\nconst gradP = new Array(512);\r\n\r\nconst grad3 = [\r\n  new Grad(1, 1, 0), new Grad(-1, 1, 0), new Grad(1, -1, 0), new Grad(-1, -1, 0),\r\n  new Grad(1, 0, 1), new Grad(-1, 0, 1), new Grad(1, 0, -1), new Grad(-1, 0, -1),\r\n  new Grad(0, 1, 1), new Grad(0, -1, 1), new Grad(0, 1, -1), new Grad(0, -1, -1)\r\n];\r\n\r\nconst p = [\r\n  151, 160, 137, 91, 90, 15,\r\n  131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,\r\n  190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,\r\n  88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,\r\n  77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,\r\n  102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,\r\n  135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,\r\n  5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,\r\n  223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,\r\n  129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,\r\n  251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,\r\n  49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,\r\n  138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180\r\n];\r\n\r\n// This isn't a very good seeding function, but it works ok. It supports 2^16\r\n// different seed values. Write something better if you need more seeds.\r\nfunction seed(seed) {\r\n  if (seed > 0 && seed < 1) {\r\n    // Scale the seed out\r\n    seed *= 65536;\r\n  }\r\n\r\n  seed = Math.floor(seed);\r\n  if (seed < 256) {\r\n    seed |= seed << 8;\r\n  }\r\n\r\n  for (let i = 0; i < 256; i++) {\r\n    let v;\r\n    if (i & 1) {\r\n      v = p[i] ^ (seed & 255);\r\n    } else {\r\n      v = p[i] ^ ((seed >> 8) & 255);\r\n    }\r\n\r\n    perm[i] = perm[i + 256] = v;\r\n    gradP[i] = gradP[i + 256] = grad3[v % 12];\r\n  }\r\n}\r\n\r\nseed(0);\r\n\r\n// 2D simplex noise\r\nexport function simplex(xin, yin) {\r\n  let n0, n1, n2; // Noise contributions from the three corners\r\n  // Skew the input space to determine which simplex cell we're in\r\n  const s = (xin + yin) * F2; // Hairy factor for 2D\r\n  let i = Math.floor(xin + s);\r\n  let j = Math.floor(yin + s);\r\n  const t = (i + j) * G2;\r\n  const x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.\r\n  const y0 = yin - j + t;\r\n  // For the 2D case, the simplex shape is an equilateral triangle.\r\n  // Determine which simplex we are in.\r\n  let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\r\n  if (x0 > y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\r\n    i1 = 1;\r\n    j1 = 0;\r\n  } else { // upper triangle, YX order: (0,0)->(0,1)->(1,1)\r\n    i1 = 0;\r\n    j1 = 1;\r\n  }\r\n  // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\r\n  // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\r\n  // c = (3-sqrt(3))/6\r\n  const x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\r\n  const y1 = y0 - j1 + G2;\r\n  const x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\r\n  const y2 = y0 - 1 + 2 * G2;\r\n  // Work out the hashed gradient indices of the three simplex corners\r\n  i &= 255;\r\n  j &= 255;\r\n  const gi0 = gradP[i + perm[j]];\r\n  const gi1 = gradP[i + i1 + perm[j + j1]];\r\n  const gi2 = gradP[i + 1 + perm[j + 1]];\r\n  // Calculate the contribution from the three corners\r\n  let t0 = 0.5 - x0 * x0 - y0 * y0;\r\n  if (t0 < 0) {\r\n    n0 = 0;\r\n  } else {\r\n    t0 *= t0;\r\n    n0 = t0 * t0 * gi0.dot2(x0, y0); // (x,y) of grad3 used for 2D gradient\r\n  }\r\n  let t1 = 0.5 - x1 * x1 - y1 * y1;\r\n  if (t1 < 0) {\r\n    n1 = 0;\r\n  } else {\r\n    t1 *= t1;\r\n    n1 = t1 * t1 * gi1.dot2(x1, y1);\r\n  }\r\n  let t2 = 0.5 - x2 * x2 - y2 * y2;\r\n  if (t2 < 0) {\r\n    n2 = 0;\r\n  } else {\r\n    t2 *= t2;\r\n    n2 = t2 * t2 * gi2.dot2(x2, y2);\r\n  }\r\n  // Add contributions from each corner to get the final noise value.\r\n  // The result is scaled to return values in the interval [-1,1].\r\n  return 70 * (n0 + n1 + n2);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/simplex.js","<template>\r\n    <div id=\"app-background\" ref=\"container\">\r\n      <canvas id=\"app-canvas\"></canvas>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { Loader } from \"@/helpers/loader\";\r\nimport { $e, $i, detectWebGL } from \"@/helpers/util.js\";\r\nimport browser from \"@/helpers/browser\";\r\nimport CONFIGS from \"@/helpers/configs\";\r\nimport * as input from \"@/helpers/input\";\r\nimport { World } from \"@/helpers/world\";\r\n\r\nexport default {\r\n  name: \"app-background\",\r\n  data() {\r\n    return {\r\n      assets: null,\r\n      canvas: null,\r\n      cfg: null,\r\n      cfgId: null,\r\n      errors: [],\r\n      loading: 0,\r\n      loaded: false,\r\n      world: null,\r\n      numGrassBlades: 10000,\r\n      grassPatchRadius: 40,\r\n      width: 640,\r\n      height: 480,\r\n      antialias: false\r\n    };\r\n  },\r\n  props: {},\r\n  computed: {},\r\n  methods: {\r\n    setupCameras() {},\r\n    addAmbient(color) {},\r\n    createLine() {},\r\n    detectWebGL() {\r\n      try {\r\n        const canvas = document.createElement(\"canvas\");\r\n        return (\r\n          !!canvas.getContext(\"webgl\") ||\r\n          !!canvas.getContext(\"experimental-webgl\")\r\n        );\r\n      } catch (e) {\r\n        return null;\r\n      }\r\n    },\r\n    animate() {},\r\n    loadAssets() {\r\n      const loader = Loader();\r\n      loader.load(\r\n        {\r\n          text: [\r\n            {\r\n              name: \"grass.vert\",\r\n              url: \"/shaders/grass.vert.glsl\"\r\n            },\r\n            {\r\n              name: \"grass.frag\",\r\n              url: \"/shaders/grass.frag.glsl\"\r\n            },\r\n            {\r\n              name: \"terrain.vert\",\r\n              url: \"/shaders/terrain.vert.glsl\"\r\n            },\r\n            {\r\n              name: \"terrain.frag\",\r\n              url: \"/shaders/terrain.frag.glsl\"\r\n            },\r\n            {\r\n              name: \"water.vert\",\r\n              url: \"/shaders/water.vert.glsl\"\r\n            },\r\n            {\r\n              name: \"water.frag\",\r\n              url: \"/shaders/water.frag.glsl\"\r\n            }\r\n          ],\r\n          images: [\r\n            { name: \"heightmap\", url: \"/data/heightmap.jpg\" },\r\n            { name: \"noise\", url: \"/data/noise.jpg\" }\r\n          ],\r\n          textures: [\r\n            { name: \"grass\", url: \"/data/grass.jpg\" },\r\n            { name: \"terrain1\", url: \"/data/terrain1.jpg\" },\r\n            { name: \"terrain2\", url: \"/data/terrain2.jpg\" },\r\n            { name: \"skydome\", url: \"/data/skydome.jpg\" },\r\n            { name: \"skyenv\", url: \"/data/skyenv.jpg\" }\r\n          ]\r\n        },\r\n        this.onAssetsLoaded,\r\n        this.onAssetsProgress,\r\n        this.onAssetsError\r\n      );\r\n      this.assets = loader.getAssets();\r\n      // console.log(this.assets.getAssets())\r\n      // Select a config roughly based on device type\r\n      this.cfgId = browser.isMobile.any ? \"mobile\" : \"desktop\";\r\n      this.cfg = CONFIGS[this.cfgId];\r\n      console.log(this.cfgId, this.cfg);\r\n    },\r\n    onAssetsLoaded(a) {\r\n      let assets = a;\r\n      this.loaded = true;\r\n      // $e('loading_bar').style.width = '100%'\r\n      // $e('loading_text').innerHTML = \"&nbsp;\"\r\n      setTimeout(() => {\r\n        this.start();\r\n        // $e('loading_bar_outer').style.visibility = 'hidden'\r\n        // $e('config_block').style.visibility = 'visible'\r\n        // $e('btn_start').onclick = () => {\r\n        //   anim.fadeOut($e('loading_block'), 80, () => {\r\n        //     $e('loading_block').style.display = 'none'\r\n        //     if (!isFullscreen) {\r\n        //       $e('title_bar').style.display = 'block'\r\n        //     }\r\n        //     $e('btn_fullscreen').onclick = () => {\r\n        //       fullscreen.toggle($e('app_container'))\r\n        //     }\r\n        //     $e('btn_restart').onclick = () => {\r\n        //       document.location.reload()\r\n        //     }\r\n        //   })\r\n        // }\r\n      }, 10);\r\n    },\r\n    onAssetsProgress(p) {\r\n      const pct = Math.floor(p * 100);\r\n      this.loading = pct;\r\n    },\r\n    onAssetsError(e) {\r\n      this.errors.push(e);\r\n    },\r\n    setDimensions(cb) {},\r\n    addListeners() {},\r\n    animationBusListeners() {},\r\n    resize() {\r\n      this.width = this.$refs.container.clientWidth;\r\n      this.height = this.$refs.container.clientHeight;\r\n      if (this.world !== null) {\r\n        this.world.resize(this.width, this.height);\r\n      } else {\r\n        const canvas = $e(\"app-canvas\");\r\n        canvas.width = this.width;\r\n        canvas.height = this.height;\r\n        this.canvas = canvas;\r\n      }\r\n\r\n      // Seems to be a good place to check for fullscreen toggle.\r\n      // const fs = fullscreen.is();\r\n      // if (fs !== isFullscreen) {\r\n      //   // Show/hide the UI when switching windowed/FS mode.\r\n      //   $e(\"title_bar\").style.display = fs ? \"none\" : \"block\";\r\n      //   isFullscreen = fs;\r\n      // }\r\n    },\r\n    start() {\r\n      // Get detail settings from UI inputs\r\n      // const numGrassBlades = +$i(\"inp_blades\").value;\r\n      // const grassPatchRadius = +$i(\"inp_depth\").value;\r\n      // const antialias = !!$i(\"chk_antialias\").checked;\r\n      // Create an instance of the world\r\n      this.world = World(\r\n        this.assets,\r\n        this.numGrassBlades,\r\n        this.grassPatchRadius,\r\n        this.width,\r\n        this.height,\r\n        this.antialias\r\n      );\r\n      // Start our animation loop\r\n      this.doFrame();\r\n    },\r\n    doFrame() {\r\n      this.world.doFrame();\r\n      requestAnimationFrame(this.doFrame);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.resize();\r\n    window.addEventListener(\"resize\", this.resize, false);\r\n    window.addEventListener(\"orientationchange\", this.resize, false);\r\n    this.loadAssets();\r\n    input.init();\r\n\r\n    return true;\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n@import \"assets/css/bootstrap/functions\";\r\n@import \"assets/css/variables\";\r\n@import \"assets/css/bootstrap/mixins\";\r\n\r\n#app-background {\r\n  // background-color: $gray-900;\r\n  // background-image: url('~assets/images/abstract-1175050_1920.jpg');\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  canvas {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// components/App/AppBackground.vue","'use strict';\r\n\r\nexport default {\r\n  mobile: {\r\n    blades: 20000,\r\n    depth: 50.0,\r\n    antialias: false\r\n  },\r\n  laptop: {\r\n    blades: 40000,\r\n    depth: 65.0,\r\n    antialias: false\r\n  },\r\n  desktop: {\r\n    blades: 84000,\r\n    depth: 85.0,\r\n    antialias: true\r\n  },\r\n  desktop2: {\r\n    blades: 250000,\r\n    depth: 125.0,\r\n    antialias: true\r\n  },\r\n  gamerig: {\r\n    blades: 500000,\r\n    depth: 175.0,\r\n    antialias: true\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/configs.js","'use strict';\r\n\r\nexport const state = {\r\n  up: 0,\r\n  down: 0,\r\n  left: 0,\r\n  right: 0,\r\n  forward: 0,\r\n  back: 0,\r\n  pitchup: 0,\r\n  pitchdown: 0\r\n};\r\n\r\nconst keyStates = new Array(256).map(b => false);\r\n\r\n// Any listeners the app has set up\r\nconst keyPressListeners = {};\r\n\r\nfunction setState(k, s) {\r\n  const cs = state;\r\n  // arrow keys L/R/F/B\r\n  if (k === 37)\r\n    cs.left = s;\r\n  else if (k === 39)\r\n    cs.right = s;\r\n  else if (k === 38)\r\n    cs.forward = s;\r\n  else if (k === 40)\r\n    cs.back = s;\r\n  else if (k === 87) // W\r\n    cs.up = s;\r\n  else if (k === 83) // S\r\n    cs.down = s;\r\n  else if (k === 81) // Q\r\n    cs.pitchup = s;\r\n  else if (k === 65) // A\r\n    cs.pitchdown = s;\r\n}\r\n\r\nfunction onKeyDown(ev) {\r\n  if (!keyStates[ev.keyCode]) {\r\n    setState(ev.keyCode, 1.0);\r\n    keyStates[ev.keyCode] = true;\r\n    const codeStr = ev.keyCode.toString();\r\n    console.log(keyPressListeners[codeStr])\r\n\r\n    if (typeof keyPressListeners[codeStr] === 'function') {\r\n      keyPressListeners[codeStr]();\r\n    }\r\n  }\r\n}\r\n\r\nfunction onKeyUp(ev) {\r\n  console.log('Key Up', ev)\r\n  if (keyStates[ev.keyCode]) {\r\n    keyStates[ev.keyCode] = false;\r\n    setState(ev.keyCode, 0.0);\r\n  }\r\n}\r\n\r\nlet initialized = false;\r\n\r\nexport function init() {\r\n  console.log('Input Initializing');\r\n  if (initialized) return;\r\n  document.addEventListener('keydown', onKeyDown, true);\r\n  document.addEventListener('keyup', onKeyUp, true);\r\n  initialized = true;\r\n}\r\n\r\nexport function getKeyState(code) {\r\n  return keyStates[code];\r\n}\r\n\r\nexport function setKeyPressListener(code, fn) {\r\n  keyPressListeners[code.toString()] = fn;\r\n  console.log(keyPressListeners)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/input.js","'use strict';\r\n\r\nimport {\r\n  pmod\r\n} from '@/helpers/gmath';\r\nimport {\r\n  Vec2,\r\n  Vec3\r\n} from '@/helpers/vec';\r\nimport {\r\n  Heightfield\r\n} from '@/helpers/heightfield';\r\nimport * as THREE from 'three';\r\n/**\r\n * Create a texture containing height, lighting, etc. data\r\n * encoded into RGBA channels.\r\n */\r\nexport function createTexture(hf, lightDir, imgWind) {\r\n  const canvas = document.createElement('canvas');\r\n  const canvasWidth = hf.xCount + 1;\r\n  const canvasHeight = hf.yCount + 1;\r\n  canvas.width = canvasWidth;\r\n  canvas.height = canvasHeight;\r\n  const ctx = canvas.getContext('2d');\r\n  const imgData = ctx.getImageData(0, 0, canvasWidth, canvasHeight);\r\n  // Fill R (height) and G (light) values from heightfield data and computed light\r\n  computeData(hf, lightDir, imgData.data);\r\n  // Add wind intensity to B channel\r\n  addWindData(imgWind, imgData.data);\r\n  ctx.putImageData(imgData, 0, 0);\r\n  const tex = new THREE.Texture(canvas);\r\n  tex.wrapS = tex.wrapT = THREE.RepeatWrapping;\r\n  tex.needsUpdate = true;\r\n  return tex;\r\n}\r\n\r\n/**\r\n * Pack heights and lighting into RGBA data\r\n */\r\nfunction computeData(hf, lightDir, buf) {\r\n  const vnorms = hf.vtxNormals;\r\n  const w = hf.xCount + 1;\r\n  const h = hf.yCount + 1;\r\n  const n = Vec3.create();\r\n  const tStart = Date.now();\r\n  for (let y = 0; y < h; ++y) {\r\n    for (let x = 0; x < w; ++x) {\r\n      let iSrc = y * w + x;\r\n      let iDst = (h - y - 1) * w + x;\r\n      // Get height, scale & store in R component\r\n      buf[iDst * 4 + 0] = Math.round(hf.heights[iSrc] / hf.maxHeight * 255.0);\r\n      // Get normal at this location to compute light\r\n      let ni = iSrc * 3;\r\n      n.x = vnorms[ni++];\r\n      n.y = vnorms[ni++];\r\n      n.z = vnorms[ni++];\r\n      // Compute light & store in G component\r\n      let light = Math.max(-Vec3.dot(n, lightDir), 0.0);\r\n      light *= computeShade(hf, lightDir, x, y);\r\n      buf[iDst * 4 + 1] = Math.round(light * 255.0);\r\n      //buf[iDst * 4 + 2] = ... // B channel for terrain type?\r\n      buf[iDst * 4 + 3] = 255; // must set alpha to some value > 0\r\n    }\r\n  }\r\n  const dt = Date.now() - tStart;\r\n  // console.log(`computed terrain data texture (${w}x${h}) values in ${dt}ms`)\r\n  return buf;\r\n}\r\n\r\nconst _v = Vec2.create();\r\n\r\nfunction computeShade(hf, lightDir, ix, iy) {\r\n  // Make a normalized 2D direction vector we'll use to walk horizontally\r\n  // toward the lightsource until z reaches max height\r\n  const shadGradRange = 5.0;\r\n  const hdir = _v;\r\n  const w = hf.xCount + 1;\r\n  const h = hf.yCount + 1;\r\n  let i = iy * w + ix;\r\n  let height = hf.heights[i]; // height at this point\r\n  hdir.x = -lightDir.x;\r\n  hdir.y = -lightDir.y;\r\n  Vec2.normalize(hdir, hdir);\r\n  const zstep = (Vec2.length(hdir) / Vec2.length(lightDir)) * (-lightDir.z);\r\n  let x = ix;\r\n  let y = iy;\r\n  // Walk along the; direction until we discover this point\r\n  // is in shade or the light vector is too high to be shaded\r\n  while (height < hf.maxHeight) {\r\n    x += hdir.x;\r\n    y += hdir.y;\r\n    height += zstep;\r\n    const qx = pmod(Math.round(x), w);\r\n    const qy = pmod(Math.round(y), h);\r\n    const sampleHeight = hf.heights[qy * w + qx];\r\n    if (sampleHeight > height) {\r\n      if (sampleHeight - height > shadGradRange)\r\n        return 0.7; // this point is in shade\r\n      else\r\n        return 0.7 + 0.3 * (shadGradRange - (sampleHeight - height)) / shadGradRange;\r\n    }\r\n  }\r\n  return 1.0;\r\n}\r\n\r\n/**\r\n * Put wind data from the wind image to the b channel\r\n */\r\nfunction addWindData(imgWind, buf) {\r\n  const canvas = document.createElement('canvas');\r\n  const w = imgWind.naturalWidth;\r\n  const h = imgWind.naturalHeight;\r\n  canvas.width = w;\r\n  canvas.height = h;\r\n  const ctxSrc = canvas.getContext('2d');\r\n  ctxSrc.drawImage(imgWind, 0, 0);\r\n  const windData = ctxSrc.getImageData(0, 0, w, h).data;\r\n  for (let y = 0; y < h; ++y) {\r\n    for (let x = 0; x < w; ++x) {\r\n      const i = (y * w + x) * 4;\r\n      // Get R channel from src. We only use the single channel\r\n      // because assume src img is grayscale.\r\n      const p = windData[i];\r\n      // Now set the B channel of the buffer we're writing to\r\n      buf[i + 2] = p;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/terramap.js","'use strict';\n\nimport {\n  $e\n} from './util';\nimport {\n  difAngle\n} from './gmath';\nimport {\n  Vec2,\n  Vec3,\n  Color\n} from '@/helpers/vec';\nimport * as logger from '@/helpers/logger';\nimport * as input from '@/helpers/input';\nimport {\n  Loader\n} from '@/helpers/loader';\nimport createSkyDome from '@/helpers/skydome';\nimport * as heightfield from '@/helpers/heightfield';\n// type Heightfield = heightfield.Heightfield\nimport * as grass from '@/helpers/grass';\nimport * as terrain from '@/helpers/terrain';\nimport * as terramap from '@/helpers/terramap';\nimport * as water from '@/helpers/water';\nimport Player from '@/helpers/player';\nimport {\n  FPSMonitor\n} from '@/helpers/fps';\nimport * as THREE from 'three';\nconst VIEW_DEPTH = 2000.0;\n\nconst MAX_TIMESTEP = 67; // max 67 ms/frame\n\nconst HEIGHTFIELD_SIZE = 3072.0;\nconst HEIGHTFIELD_HEIGHT = 180.0;\nconst WATER_LEVEL = HEIGHTFIELD_HEIGHT * 0.305556; // 55.0\nconst BEACH_TRANSITION_LOW = 0.31;\nconst BEACH_TRANSITION_HIGH = 0.36;\n\nconst LIGHT_DIR = Vec3.create(0.0, 1.0, -1.0);\nVec3.normalize(LIGHT_DIR, LIGHT_DIR);\n\nconst FOG_COLOR = Color.create(0.74, 0.77, 0.91);\nconst GRASS_COLOR = Color.create(0.45, 0.46, 0.19);\n\nconst WATER_COLOR = Color.create(0.6, 0.7, 0.85);\n\nconst WIND_DEFAULT = 1.5;\nconst WIND_MAX = 3.0;\n\nconst MAX_GLARE = 0.25; // max glare effect amount\nconst GLARE_RANGE = 1.1; // angular range of effect\nconst GLARE_YAW = Math.PI * 1.5; // yaw angle when looking directly at sun\nconst GLARE_PITCH = 0.2; // pitch angle looking at sun\nconst GLARE_COLOR = Color.create(1.0, 0.8, 0.4);\n\nconst INTRO_FADE_DUR = 1000;\n\n// export interface IWorld {\n//   doFrame(): void\n//   resize(w: number, h: number): void\n// }\n\n// interface MeshSet {\n//   terrain: THREE.Mesh\n//   grass: THREE.Mesh\n//   sky: THREE.Mesh\n//   water: THREE.Mesh\n//   sunFlare: THREE.Mesh\n//   fade: THREE.Mesh // used for intro fade from white\n// }\n\n///////////////////////////////////////////////////////////////////////\n/**\n * Create a World instance\n */\nexport function World(assets,\n  numGrassBlades, grassPatchRadius,\n  displayWidth, displayHeight,\n  antialias\n) {\n\n  const canvas = $e('app-canvas');\n\n  // // Make canvas transparent so it isn't rendered as black for 1 frame at startup\n  const renderer = new THREE.WebGLRenderer({\n    canvas: canvas,\n    antialias: antialias,\n    clearColor: 0xFFFFFF,\n    clearAlpha: 1,\n    alpha: true\n  });\n  if (!renderer) {\n    throw new Error('Failed to create WebGL Renderer');\n  }\n\n  // // Setup some render values based on provided configs\n  const fogDist = grassPatchRadius * 20.0;\n  const grassFogDist = grassPatchRadius * 2.0;\n  const camera = new THREE.PerspectiveCamera(\n    45, displayWidth / displayHeight, 1.0, VIEW_DEPTH\n  );\n  const meshes = {\n    terrain: null,\n    grass: null,\n    sky: null,\n    water: null,\n    sunFlare: null,\n    fade: null\n  };\n  // as any\n\n  const scene = new THREE.Scene();\n  scene.fog = new THREE.Fog(Color.to24bit(FOG_COLOR), 0.1, fogDist);\n\n  // // Setup the camera so Z is up.\n  // // Then we have cartesian X,Y coordinates along ground plane.\n  camera.rotation.order = 'ZXY';\n  camera.rotation.x = Math.PI * 0.5;\n  camera.rotation.y = Math.PI * 0.5;\n  camera.rotation.z = Math.PI;\n  camera.up.set(0.0, 0.0, 1.0);\n\n  // // Put camera in an object so we can transform it normally\n  const camHolder = new THREE.Object3D();\n  camHolder.rotation.order = 'ZYX';\n  camHolder.add(camera);\n\n  scene.add(camHolder);\n\n  // Setup heightfield\n  let hfImg = assets.images.heightmap;\n  const hfCellSize = HEIGHTFIELD_SIZE / hfImg.width;\n  const heightMapScale = Vec3.create(\n    1.0 / HEIGHTFIELD_SIZE,\n    1.0 / HEIGHTFIELD_SIZE,\n    HEIGHTFIELD_HEIGHT\n  );\n  const heightField = heightfield.create({\n    cellSize: hfCellSize,\n    minHeight: 0.0,\n    maxHeight: heightMapScale.z,\n    image: hfImg\n  });\n  hfImg = undefined;\n\n  const terraMap = terramap.createTexture(heightField, LIGHT_DIR, assets.images.noise);\n\n  let windIntensity = WIND_DEFAULT;\n\n  // Create a large patch of grass to fill the foreground\n  meshes.grass = grass.createMesh({\n    lightDir: LIGHT_DIR,\n    numBlades: numGrassBlades,\n    radius: grassPatchRadius,\n    texture: assets.textures.grass,\n    vertScript: assets.text['grass.vert'],\n    fragScript: assets.text['grass.frag'],\n    heightMap: terraMap,\n    heightMapScale: heightMapScale,\n    fogColor: FOG_COLOR,\n    fogFar: fogDist,\n    grassFogFar: grassFogDist,\n    grassColor: GRASS_COLOR,\n    transitionLow: BEACH_TRANSITION_LOW,\n    transitionHigh: BEACH_TRANSITION_HIGH,\n    windIntensity: windIntensity\n  });\n  // Set a specific render order - don't let three.js sort things for us.\n  meshes.grass.renderOrder = 10;\n  scene.add(meshes.grass);\n\n  // Terrain mesh\n  const terra = terrain.create({\n    textures: [assets.textures.terrain1, assets.textures.terrain2],\n    vertScript: assets.text['terrain.vert'],\n    fragScript: assets.text['terrain.frag'],\n    heightMap: terraMap,\n    heightMapScale: heightMapScale,\n    fogColor: FOG_COLOR,\n    fogFar: fogDist,\n    grassFogFar: grassFogDist,\n    transitionLow: BEACH_TRANSITION_LOW,\n    transitionHigh: BEACH_TRANSITION_HIGH\n  });\n  meshes.terrain = terra.mesh;\n  meshes.terrain.renderOrder = 20;\n  scene.add(meshes.terrain);\n\n  // Skydome\n  meshes.sky = createSkyDome(assets.textures.skydome, VIEW_DEPTH * 0.95);\n  meshes.sky.renderOrder = 30;\n  scene.add(meshes.sky);\n  meshes.sky.position.z = -25.0;\n\n  meshes.water = water.createMesh({\n    envMap: assets.textures.skyenv,\n    vertScript: assets.text['water.vert'],\n    fragScript: assets.text['water.frag'],\n    waterLevel: WATER_LEVEL,\n    waterColor: WATER_COLOR,\n    fogColor: FOG_COLOR,\n    fogNear: 1.0,\n    fogFar: fogDist\n  });\n  meshes.water.renderOrder = 40;\n  scene.add(meshes.water);\n  meshes.water.position.z = WATER_LEVEL;\n\n  // White plane to cover screen for fullscreen fade-in from white\n  meshes.fade = new THREE.Mesh(\n    new THREE.PlaneBufferGeometry(6.0, 4.0, 1, 1),\n    new THREE.MeshBasicMaterial({\n      color: 0xFFFFFF,\n      fog: false,\n      transparent: true,\n      opacity: 1.0,\n      depthTest: false,\n      depthWrite: false\n    })\n  );\n  meshes.fade.position.x = 2.0; // place directly in front of camera\n  meshes.fade.rotation.y = Math.PI * 1.5;\n  meshes.fade.renderOrder = 10;\n  camHolder.add(meshes.fade);\n  camHolder.renderOrder = 100;\n\n  // Bright yellow plane for sun glare using additive blending\n  // to blow out the colours\n  meshes.sunFlare = new THREE.Mesh(\n    new THREE.PlaneBufferGeometry(6.0, 4.0, 1, 1),\n    new THREE.MeshBasicMaterial({\n      color: Color.to24bit(GLARE_COLOR),\n      fog: false,\n      transparent: true,\n      opacity: 0.0,\n      depthTest: false,\n      depthWrite: false,\n      blending: THREE.AdditiveBlending\n    })\n  );\n  meshes.sunFlare.position.x = 2.05;\n  meshes.sunFlare.rotation.y = Math.PI * 1.5;\n  meshes.sunFlare.visible = false;\n  meshes.sunFlare.renderOrder = 20;\n  camHolder.add(meshes.sunFlare);\n\n  // Create a Player instance\n  const player = new Player(heightField, WATER_LEVEL);\n\n  // For timing\n  let prevT = Date.now(); // prev frame time (ms)\n  let simT = 0; // total running time (ms)\n\n  resize(displayWidth, displayHeight);\n\n  // toggle logger on ` press\n  input.setKeyPressListener(223, () => {\n    logger.toggle();\n  });\n\n  input.setKeyPressListener('O'.charCodeAt(0), () => {\n    player.state.pos.x = 0;\n    player.state.pos.y = 0;\n  });\n\n  input.setKeyPressListener('F'.charCodeAt(0), () => {\n    windIntensity = Math.max(windIntensity - 0.1, 0);\n    const mat = meshes.grass.material;\n\n    mat.uniforms.windIntensity.value = windIntensity;\n  });\n  input.setKeyPressListener('G'.charCodeAt(0), () => {\n    windIntensity = Math.min(windIntensity + 0.1, WIND_MAX);\n    const mat = meshes.grass.material;\n    mat.uniforms.windIntensity.value = windIntensity;\n  });\n\n  const fpsMon = new FPSMonitor();\n\n  // ///////////////////////////////////////////////////////////////////\n  // // Public World instance methods\n\n  /**\n   * Call every frame\n   */\n  function doFrame() {\n    const curT = Date.now();\n    let dt = curT - prevT;\n    fpsMon.update(dt);\n\n    if (dt > 0) {\n      // only do computations if time elapsed\n      if (dt > MAX_TIMESTEP) {\n        // don't exceed max timestep\n        dt = MAX_TIMESTEP;\n        prevT = curT - MAX_TIMESTEP;\n      }\n      // update sim\n      update(dt);\n      // render it\n      render();\n      // remember prev frame time\n      prevT = curT;\n    }\n  }\n\n  /** Handle window resize events */\n  function resize(w, h) {\n    let displayWidth = w;\n    let displayHeight = h;\n    renderer.setSize(displayWidth, displayHeight);\n    camera.aspect = displayWidth / displayHeight;\n    camera.updateProjectionMatrix();\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  // Private instance methods\n\n  const _hinfo = {\n    i: 0,\n    t: 0,\n    z: 0.0,\n    n: Vec3.create()\n  };\n\n  const _v = Vec2.create(0.0, 0.0);\n\n  /**\n   * Logic update\n   */\n  function update(dt) {\n    // Intro fade from white\n    if (simT < INTRO_FADE_DUR) {\n      updateFade(dt);\n    }\n\n    simT += dt;\n    const t = simT * 0.001;\n\n    // Move player (viewer)\n    player.update(dt);\n    const ppos = player.state.pos;\n    const pdir = player.state.dir;\n    const pyaw = player.state.yaw;\n    const ppitch = player.state.pitch;\n    const proll = player.state.roll;\n\n    heightfield.infoAt(heightField, ppos.x, ppos.y, true, _hinfo);\n    const groundHeight = _hinfo.z;\n\n    if (logger.isVisible()) {\n      logger.setText(`\n        x: ${ppos.x.toFixed(4)},\n        y: ${ppos.y.toFixed(4)},\n        z: ${ppos.z.toFixed(4)},\n        dx: ${pdir.x.toFixed(4)},\n        dy: ${pdir.y.toFixed(4)},\n        dz: ${pdir.z.toFixed(4)},\n        height: ${groundHeight.toFixed(4)},\n        i: ${_hinfo.i},\n        fps: ${fpsMon.fps()}\n      `);\n    }\n\n    // Move skydome with player\n    meshes.sky.position.x = ppos.x;\n    meshes.sky.position.y = ppos.y;\n\n    // Update grass.\n    // Here we specify the centre position of the square patch to\n    // be drawn. That would be directly in front of the camera, the\n    // distance from centre to edge of the patch.\n    const drawPos = _v;\n    Vec2.set(drawPos,\n      ppos.x + Math.cos(pyaw) * grassPatchRadius,\n      ppos.y + Math.sin(pyaw) * grassPatchRadius\n    );\n    grass.update(meshes.grass, t, ppos, pdir, drawPos);\n\n    terrain.update(terra, ppos.x, ppos.y);\n\n    water.update(meshes.water, ppos);\n\n    // Update camera location/orientation\n    Vec3.copy(ppos, camHolder.position);\n    //camHolder.position.z = ppos.z + groundHeight\n    camHolder.rotation.z = pyaw;\n    // Player considers 'up' pitch positive, but cam pitch (about Y) is reversed\n    camHolder.rotation.y = -ppitch;\n    camHolder.rotation.x = proll;\n\n    // Update sun glare effect\n    updateGlare();\n  }\n\n  /** Update how much glare effect by how much we're looking at the sun */\n  function updateGlare() {\n    const dy = Math.abs(difAngle(GLARE_YAW, player.state.yaw));\n    const dp = Math.abs(difAngle(GLARE_PITCH, player.state.pitch)) * 1.75;\n    const sunVisAngle = Math.sqrt(dy * dy + dp * dp);\n    if (sunVisAngle < GLARE_RANGE) {\n      const glare = MAX_GLARE * Math.pow((GLARE_RANGE - sunVisAngle) / (1.0 + MAX_GLARE), 0.75);\n      (meshes.sunFlare.material).opacity = Math.max(0.0, glare);\n      meshes.sunFlare.visible = true;\n    } else {\n      meshes.sunFlare.visible = false;\n    }\n  }\n\n  /** Update intro fullscreen fade from white */\n  function updateFade(dt) {\n    const mat = meshes.fade.material;\n    if (simT + dt >= INTRO_FADE_DUR) {\n      // fade is complete - hide cover\n      mat.opacity = 0.0;\n      meshes.fade.visible = false;\n    } else {\n      // update fade opacity\n      mat.opacity = 1.0 - Math.pow(simT / INTRO_FADE_DUR, 2.0);\n    }\n  }\n\n  function render() {\n    renderer.render(scene, camera);\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  // Return public interface\n  return {\n    doFrame,\n    resize\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/world.js","'use strict';\r\nimport {\r\n  Vec3,\r\n  Color\r\n} from './vec';\r\nimport * as THREE from 'three';\r\n\r\nlet _time = 0;\r\n\r\nexport function createMesh(opts) {\r\n  opts.envMap.wrapS = opts.envMap.wrapT = THREE.RepeatWrapping;\r\n  opts.envMap.minFilter = opts.envMap.magFilter = THREE.LinearFilter;\r\n  opts.envMap.generateMipmaps = false;\r\n  const mat = new THREE.RawShaderMaterial({\r\n    uniforms: {\r\n      time: {\r\n        type: '1f',\r\n        value: 0.0\r\n      },\r\n      viewPos: {\r\n        type: '3f',\r\n        value: [0.0, 0.0, 10.0]\r\n      },\r\n      map: {\r\n        type: 't',\r\n        value: opts.envMap\r\n      },\r\n      waterLevel: {\r\n        type: '1f',\r\n        value: opts.waterLevel\r\n      },\r\n      waterColor: {\r\n        type: '3f',\r\n        value: Color.toArray(opts.waterColor)\r\n      },\r\n      fogColor: {\r\n        type: '3f',\r\n        value: Color.toArray(opts.fogColor)\r\n      },\r\n      fogNear: {\r\n        type: 'f',\r\n        value: 1.0\r\n      },\r\n      fogFar: {\r\n        type: 'f',\r\n        value: opts.fogFar * 1.5\r\n      },\r\n    },\r\n    vertexShader: opts.vertScript,\r\n    fragmentShader: opts.fragScript\r\n  });\r\n  const mesh = new THREE.Mesh(\r\n    new THREE.PlaneBufferGeometry(2000.0, 2000.0),\r\n    mat\r\n  );\r\n  mesh.frustumCulled = false;\r\n  _time = Date.now();\r\n  return mesh;\r\n}\r\n\r\nexport function update(mesh, viewPos) {\r\n  mesh.position.x = viewPos.x;\r\n  mesh.position.y = viewPos.y;\r\n  const mat = mesh.material;\r\n  const vp = mat.uniforms.viewPos.value;\r\n  vp[0] = viewPos.x;\r\n  vp[1] = viewPos.y;\r\n  vp[2] = viewPos.z;\r\n\r\n  mat.uniforms.time.value = (Date.now() - _time) / 250.0;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/water.js","'use strict';\r\n\r\nimport {\r\n  Vec3,\r\n  Color\r\n} from '@/helpers/vec';\r\nimport * as THREE from 'three';\r\n// Terrain uses a custom shader so that we can apply the same\r\n// type of fog as is applied to the grass. This way they both\r\n// blend to green first, then blend to atmosphere color in the\r\n// distance.\r\n\r\n// Uses terrain shaders (see: shader/terrain.*.glsl)\r\n\r\nconst MAX_INDICES = 262144; // 65536\r\nconst TEX_SCALE = 1.0 / 6.0; // texture scale per quad\r\n\r\nexport function create(opts) {\r\n  // max square x,y divisions that will fit in max indices\r\n  const xCellCount = Math.floor(Math.sqrt(MAX_INDICES / (3 * 2)));\r\n  const yCellCount = xCellCount;\r\n  const cellSize = 1.0 / opts.heightMapScale.x / xCellCount;\r\n\r\n  return {\r\n    cellSize: cellSize,\r\n    xCellCount: xCellCount,\r\n    yCellCount: yCellCount,\r\n    xSize: xCellCount * cellSize,\r\n    ySize: yCellCount * cellSize,\r\n    mesh: createMesh(opts)\r\n  };\r\n}\r\n\r\n/**\r\n * @param xcount X vertex count\r\n * @param ycount Y vertex count\r\n */\r\nfunction createIdBuffer(xcount, ycount) {\r\n  const idSize = (xcount - 1) * (ycount - 1) * 3 * 2;\r\n  let id;\r\n  if (idSize <= 65536) {\r\n    id = new Uint16Array(idSize);\r\n  } else {\r\n    id = new Uint32Array(idSize);\r\n  }\r\n  const xc = xcount - 1;\r\n  const yc = ycount - 1;\r\n  for (let y = 0; y < yc; ++y) {\r\n    for (let x = 0; x < xc; ++x) {\r\n      const i = 6 * (y * xc + x);\r\n      // tri 1\r\n      id[i + 0] = (y + 0) * xcount + (x + 0);\r\n      id[i + 1] = (y + 0) * xcount + (x + 1);\r\n      id[i + 2] = (y + 1) * xcount + (x + 1);\r\n      // tri 2\r\n      id[i + 3] = (y + 1) * xcount + (x + 1);\r\n      id[i + 4] = (y + 1) * xcount + (x + 0);\r\n      id[i + 5] = (y + 0) * xcount + (x + 0);\r\n    }\r\n  }\r\n  return id;\r\n}\r\n\r\nexport function update(t, x, y) {\r\n  const ix = Math.floor(x / t.cellSize);\r\n  const iy = Math.floor(y / t.cellSize);\r\n  const ox = ix * t.cellSize;\r\n  const oy = iy * t.cellSize;\r\n  const mat = t.mesh.material;\r\n  let p = mat.uniforms.offset.value;\r\n  p[0] = ox;\r\n  p[1] = oy;\r\n  p = mat.uniforms.uvOffset.value;\r\n  p[0] = iy * TEX_SCALE; // not sure why x,y need to be swapped here...\r\n  p[1] = ix * TEX_SCALE;\r\n}\r\n\r\n/** Creates a textured plane larger than the viewer will ever travel */\r\nfunction createMesh(opts) {\r\n  // max x,y divisions that will fit 65536 indices\r\n  const xCellCount = Math.floor(Math.sqrt(MAX_INDICES / (3 * 2)));\r\n  const yCellCount = xCellCount;\r\n  const cellSize = 1.0 / opts.heightMapScale.x / xCellCount;\r\n  const texs = opts.textures;\r\n  texs.forEach(tex => {\r\n    tex.wrapS = tex.wrapT = THREE.RepeatWrapping;\r\n    tex.anisotropy = 9;\r\n  });\r\n  const htex = opts.heightMap;\r\n  htex.wrapS = htex.wrapT = THREE.RepeatWrapping;\r\n  const vtxBufs = createVtxBuffers(cellSize, xCellCount + 1, yCellCount + 1);\r\n  const idBuf = createIdBuffer(xCellCount + 1, yCellCount + 1);\r\n  const geo = new THREE.BufferGeometry();\r\n  geo.addAttribute('position', new THREE.BufferAttribute(vtxBufs.position, 3));\r\n  geo.addAttribute('uv', new THREE.BufferAttribute(vtxBufs.uv, 2));\r\n  geo.setIndex(new THREE.BufferAttribute(idBuf, 1));\r\n  const hscale = opts.heightMapScale;\r\n\r\n  const fragScript = opts.fragScript.replace(\r\n    '%%TRANSITION_LOW%%', opts.transitionLow.toString()\r\n  ).replace(\r\n    '%%TRANSITION_HIGH%%', opts.transitionHigh.toString()\r\n  );\r\n\r\n  const mat = new THREE.RawShaderMaterial({\r\n    uniforms: {\r\n      offset: {\r\n        type: '2f',\r\n        value: [0.0, 0.0]\r\n      },\r\n      uvOffset: {\r\n        type: '2f',\r\n        value: [0.0, 0.0]\r\n      },\r\n      map1: {\r\n        type: 't',\r\n        value: texs[0]\r\n      },\r\n      map2: {\r\n        type: 't',\r\n        value: texs[1]\r\n      },\r\n      heightMap: {\r\n        type: 't',\r\n        value: htex\r\n      },\r\n      heightMapScale: {\r\n        type: '3f',\r\n        value: [hscale.x, hscale.y, hscale.z]\r\n      },\r\n      fogColor: {\r\n        type: '3f',\r\n        value: Color.toArray(opts.fogColor)\r\n      },\r\n      fogNear: {\r\n        type: 'f',\r\n        value: 1.0\r\n      },\r\n      fogFar: {\r\n        type: 'f',\r\n        value: opts.fogFar\r\n      },\r\n      grassFogFar: {\r\n        type: 'f',\r\n        value: opts.grassFogFar\r\n      }\r\n    },\r\n    vertexShader: opts.vertScript,\r\n    fragmentShader: fragScript\r\n  });\r\n  const mesh = new THREE.Mesh(geo, mat);\r\n  mesh.frustumCulled = false;\r\n  return mesh;\r\n}\r\n\r\n/**\r\n * @param cellSize Size of each mesh cell (quad)\r\n * @param xcount X vertex count\r\n * @param ycount Y vertex count\r\n */\r\nfunction createVtxBuffers(cellSize, xcount, ycount) {\r\n  const pos = new Float32Array(xcount * ycount * 3);\r\n  const uv = new Float32Array(xcount * ycount * 2);\r\n  let ix, iy;\r\n  let x, y;\r\n  let u, v;\r\n  let i = 0;\r\n  let j = 0;\r\n  for (iy = 0; iy < ycount; ++iy) {\r\n    y = (iy - ycount / 2.0) * cellSize;\r\n    u = iy;\r\n    for (ix = 0; ix < xcount; ++ix) {\r\n      x = (ix - xcount / 2.0) * cellSize;\r\n      v = ix;\r\n      pos[i++] = x;\r\n      pos[i++] = y;\r\n      pos[i++] = 4.0 * Math.cos(ix * 1.0) + 4.0 * Math.sin(iy * 1.0);\r\n      uv[j++] = u * TEX_SCALE;\r\n      uv[j++] = v * TEX_SCALE;\r\n    }\r\n  }\r\n  return {\r\n    position: pos,\r\n    uv: uv\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/terrain.js","'use strict';\r\n\r\nimport {\r\n  TextureLoader\r\n} from 'three';\r\n\r\nexport function Loader() {\r\n\r\n  let isLoading = false;\r\n  let totalToLoad = 0;\r\n  let numLoaded = 0;\r\n  let numFailed = 0;\r\n  let success_cb = (any) => any;\r\n  let progress_cb = (p) => p;\r\n  let error_cb = (e) => e;\r\n  let done_cb = (ok) => ok;\r\n  let assets = {\r\n    images: {},\r\n    text: {},\r\n    textures: {}\r\n  };\r\n\r\n  function tryDone() {\r\n    if (!isLoading)\r\n      return true;\r\n    if (numLoaded + numFailed >= totalToLoad) {\r\n      const ok = !numFailed;\r\n      if (ok && success_cb) success_cb(assets);\r\n      done_cb && done_cb(ok);\r\n      isLoading = false;\r\n    }\r\n    return !isLoading;\r\n  }\r\n\r\n  function doProgress() {\r\n    numLoaded += 1;\r\n    progress_cb && progress_cb(numLoaded / totalToLoad);\r\n    tryDone();\r\n  }\r\n\r\n  function doError(e) {\r\n    error_cb && error_cb(e);\r\n    numFailed += 1;\r\n    tryDone();\r\n  }\r\n\r\n  function loadText(ad) {\r\n    // console.log('loading ' + ad.url);\r\n    const req = new XMLHttpRequest();\r\n    req.overrideMimeType('*/*');\r\n    req.onreadystatechange = function () {\r\n      if (req.readyState === 4) {\r\n        if (req.status === 200) {\r\n          assets.text[ad.name] = req.responseText;\r\n          // console.log('loaded ' + ad.name);\r\n          doProgress();\r\n        } else {\r\n          doError('Error ' + req.status + ' loading ' + ad.url);\r\n        }\r\n      }\r\n    };\r\n    req.open('GET', ad.url);\r\n    req.send();\r\n  }\r\n\r\n  function loadImage(ad) {\r\n    const img = new Image();\r\n    assets.images[ad.name] = img;\r\n    img.onload = doProgress;\r\n    img.onerror = doError;\r\n    img.src = ad.url;\r\n  }\r\n\r\n  function loadTexture(ad) {\r\n    assets.textures[ad.name] = new TextureLoader().load(ad.url, doProgress);\r\n  }\r\n\r\n  /**\r\n   * Start loading a list of assets\r\n   */\r\n  function load(\r\n    assetList,\r\n    success,\r\n    progress,\r\n    error,\r\n    done\r\n  ) {\r\n    success_cb = success;\r\n    progress_cb = progress;\r\n    error_cb = error;\r\n    done_cb = done;\r\n    totalToLoad = 0;\r\n    numLoaded = 0;\r\n    numFailed = 0;\r\n    isLoading = true;\r\n\r\n    if (assetList.text) {\r\n      totalToLoad += assetList.text.length;\r\n      for (let i = 0; i < assetList.text.length; ++i) {\r\n        loadText(assetList.text[i]);\r\n      }\r\n    }\r\n    if (assetList.images) {\r\n      totalToLoad += assetList.images.length;\r\n      for (let i = 0; i < assetList.images.length; ++i) {\r\n        loadImage(assetList.images[i]);\r\n      }\r\n    }\r\n    if (assetList.textures) {\r\n      totalToLoad += assetList.textures.length;\r\n      for (let i = 0; i < assetList.textures.length; ++i) {\r\n        loadTexture(assetList.textures[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Public interface\r\n   */\r\n  return {\r\n    load: load,\r\n    getAssets: () => assets\r\n  };\r\n\r\n} // end Loader\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/loader.js","'use strict';\r\n\r\nexport default {\r\n  isMobile() {\r\n    if (navigator) {\r\n      const a = !!navigator.userAgent.match(/Android/i);\r\n      const bb = !!navigator.userAgent.match(/BlackBerry/i);\r\n      const ios = !!navigator.userAgent.match(/iPhone|iPad|iPod/i);\r\n      const o = !!navigator.userAgent.match(/Opera Mini/i);\r\n      const w = !!navigator.userAgent.match(/IEMobile/i);\r\n      const ff = !!navigator.userAgent.match(/\\(Mobile/i);\r\n      const any = (a || bb || ios || o || w || ff);\r\n      return {\r\n        Android: a,\r\n        BlackBerry: bb,\r\n        iOS: ios,\r\n        Opera: o,\r\n        Windows: w,\r\n        FireFox: ff,\r\n        any: any\r\n      };\r\n    }\r\n  },\r\n  isStandalone() {\r\n\r\n    // iOS\r\n    if (navigator && navigator.standalone !== undefined)\r\n      return !!navigator.standalone;\r\n    // Windows Mobile\r\n    if (window && window.external && window.external.msIsSiteMode) {\r\n      return !!window.external.msIsSiteMode();\r\n    }\r\n    // Chrome\r\n    if (window && window.matchMedia) {\r\n      return window.matchMedia('(display-mode: standalone)').matches;\r\n    }\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/browser.js","'use strict';\r\n\r\nimport {\r\n  nrand\r\n} from '@/helpers/gmath';\r\nimport {\r\n  Vec2,\r\n  Vec3,\r\n  Color\r\n} from '@/helpers/vec';\r\nimport {\r\n  simplex\r\n} from '@/helpers/simplex';\r\nimport * as bufferset from './bufferset';\r\nimport * as THREE from 'three';\r\nconst BLADE_SEGS = 4; // # of blade segments\r\nconst BLADE_VERTS = (BLADE_SEGS + 1) * 2; // # of vertices per blade (1 side)\r\nconst BLADE_INDICES = BLADE_SEGS * 12;\r\nconst BLADE_WIDTH = 0.15;\r\nconst BLADE_HEIGHT_MIN = 2.25;\r\nconst BLADE_HEIGHT_MAX = 3.0;\r\n\r\n/**\r\n * Creates a patch of grass mesh.\r\n */\r\nexport function createMesh(opts) {\r\n  // Buffers to use for instances of blade mesh\r\n  const buffers = {\r\n    // Tells the shader which vertex of the blade its working on.\r\n    // Rather than supplying positions, they are computed from this vindex.\r\n    vindex: new Float32Array(BLADE_VERTS * 2 * 1),\r\n    // Shape properties of all blades\r\n    shape: new Float32Array(4 * opts.numBlades),\r\n    // Positon & rotation of all blades\r\n    offset: new Float32Array(4 * opts.numBlades),\r\n    // Indices for a blade\r\n    index: new Uint16Array(BLADE_INDICES)\r\n  };\r\n\r\n  initBladeIndices(buffers.index, 0, BLADE_VERTS, 0);\r\n  initBladeOffsetVerts(buffers.offset, opts.numBlades, opts.radius);\r\n  initBladeShapeVerts(buffers.shape, opts.numBlades, buffers.offset);\r\n  initBladeIndexVerts(buffers.vindex);\r\n\r\n  const geo = new THREE.InstancedBufferGeometry();\r\n  // Because there are no position vertices, we must create our own bounding sphere.\r\n  // (Not used because we disable frustum culling)\r\n  geo.boundingSphere = new THREE.Sphere(\r\n    new THREE.Vector3(0, 0, 0), Math.sqrt(opts.radius * opts.radius * 2.0) * 10000.0\r\n  );\r\n  geo.addAttribute('vindex', new THREE.BufferAttribute(buffers.vindex, 1));\r\n  geo.addAttribute('shape', new THREE.InstancedBufferAttribute(buffers.shape, 4));\r\n  geo.addAttribute('offset', new THREE.InstancedBufferAttribute(buffers.offset, 4));\r\n  geo.setIndex(new THREE.BufferAttribute(buffers.index, 1));\r\n\r\n  const tex = opts.texture;\r\n  tex.wrapS = tex.wrapT = THREE.RepeatWrapping;\r\n  const htex = opts.heightMap;\r\n  htex.wrapS = htex.wrapT = THREE.RepeatWrapping;\r\n  const hscale = opts.heightMapScale;\r\n\r\n  const lightDir = Vec3.clone(opts.lightDir);\r\n  lightDir.z *= 0.5;\r\n  Vec3.normalize(lightDir, lightDir);\r\n\r\n  // Fill in some constants that never change between draw calls\r\n  const vertScript = opts.vertScript.replace(\r\n    '%%BLADE_HEIGHT_TALL%%', (BLADE_HEIGHT_MAX * 1.5).toFixed(1)\r\n  ).replace(\r\n    '%%BLADE_SEGS%%', BLADE_SEGS.toFixed(1)\r\n  ).replace(\r\n    '%%PATCH_SIZE%%', (opts.radius * 2.0).toFixed(1)\r\n  ).replace(\r\n    '%%TRANSITION_LOW%%', opts.transitionLow.toString()\r\n  ).replace(\r\n    '%%TRANSITION_HIGH%%', opts.transitionHigh.toString()\r\n  );\r\n\r\n  // Setup shader\r\n  const mat = new THREE.RawShaderMaterial({\r\n    uniforms: {\r\n      lightDir: {\r\n        type: '3f',\r\n        value: Vec3.toArray(lightDir)\r\n      },\r\n      time: {\r\n        type: 'f',\r\n        value: 0.0\r\n      },\r\n      map: {\r\n        type: 't',\r\n        value: tex\r\n      },\r\n      heightMap: {\r\n        type: 't',\r\n        value: htex\r\n      },\r\n      heightMapScale: {\r\n        type: '3f',\r\n        value: [hscale.x, hscale.y, hscale.z]\r\n      },\r\n      camDir: {\r\n        type: '3f',\r\n        value: [1.0, 0.0, 0.0]\r\n      },\r\n      drawPos: {\r\n        type: '2f',\r\n        value: [100.0, 0.0]\r\n      },\r\n      fogColor: {\r\n        type: '3f',\r\n        value: Color.toArray(opts.fogColor)\r\n      },\r\n      fogNear: {\r\n        type: 'f',\r\n        value: 1.0\r\n      },\r\n      fogFar: {\r\n        type: 'f',\r\n        value: opts.fogFar\r\n      },\r\n      grassColor: {\r\n        type: '3f',\r\n        value: Color.toArray(opts.grassColor)\r\n      },\r\n      grassFogFar: {\r\n        type: 'f',\r\n        value: opts.grassFogFar\r\n      },\r\n      windIntensity: {\r\n        type: 'f',\r\n        value: opts.windIntensity\r\n      }\r\n    },\r\n    vertexShader: vertScript,\r\n    fragmentShader: opts.fragScript,\r\n    transparent: true\r\n  });\r\n  const mesh = new THREE.Mesh(geo, mat);\r\n  mesh.frustumCulled = false; // always draw, never cull\r\n  return mesh;\r\n}\r\n\r\n/**\r\n * Sets up indices for single blade mesh.\r\n * @param id array of indices\r\n * @param vc1 vertex start offset for front side of blade\r\n * @param vc2 vertex start offset for back side of blade\r\n * @param i index offset\r\n */\r\nfunction initBladeIndices(id, vc1, vc2, i) {\r\n  let seg;\r\n  // blade front side\r\n  for (seg = 0; seg < BLADE_SEGS; ++seg) {\r\n    id[i++] = vc1 + 0; // tri 1\r\n    id[i++] = vc1 + 1;\r\n    id[i++] = vc1 + 2;\r\n    id[i++] = vc1 + 2; // tri 2\r\n    id[i++] = vc1 + 1;\r\n    id[i++] = vc1 + 3;\r\n    vc1 += 2;\r\n  }\r\n  // blade back side\r\n  for (seg = 0; seg < BLADE_SEGS; ++seg) {\r\n    id[i++] = vc2 + 2; // tri 1\r\n    id[i++] = vc2 + 1;\r\n    id[i++] = vc2 + 0;\r\n    id[i++] = vc2 + 3; // tri 2\r\n    id[i++] = vc2 + 1;\r\n    id[i++] = vc2 + 2;\r\n    vc2 += 2;\r\n  }\r\n}\r\n\r\n/** Set up shape variations for each blade of grass */\r\nfunction initBladeShapeVerts(shape, numBlades, offset) {\r\n  let noise = 0;\r\n  for (let i = 0; i < numBlades; ++i) {\r\n    noise = Math.abs(simplex(offset[i * 4 + 0] * 0.03, offset[i * 4 + 1] * 0.03));\r\n    noise = noise * noise * noise;\r\n    noise *= 5.0;\r\n    shape[i * 4 + 0] = BLADE_WIDTH + Math.random() * BLADE_WIDTH * 0.5; // width\r\n    shape[i * 4 + 1] = BLADE_HEIGHT_MIN + Math.pow(Math.random(), 4.0) * (BLADE_HEIGHT_MAX - BLADE_HEIGHT_MIN) + // height\r\n      noise;\r\n    shape[i * 4 + 2] = 0.0 + Math.random() * 0.3; // lean\r\n    shape[i * 4 + 3] = 0.05 + Math.random() * 0.3; // curve\r\n  }\r\n}\r\n\r\n/** Set up positons & rotation for each blade of grass */\r\nfunction initBladeOffsetVerts(offset, numBlades, patchRadius) {\r\n  for (let i = 0; i < numBlades; ++i) {\r\n    offset[i * 4 + 0] = nrand() * patchRadius; // x\r\n    offset[i * 4 + 1] = nrand() * patchRadius; // y\r\n    offset[i * 4 + 2] = 0.0; // z\r\n    offset[i * 4 + 3] = Math.PI * 2.0 * Math.random(); // rot\r\n  }\r\n}\r\n\r\n/** Set up indices for 1 blade */\r\nfunction initBladeIndexVerts(vindex) {\r\n  for (let i = 0; i < vindex.length; ++i) {\r\n    vindex[i] = i;\r\n  }\r\n}\r\n\r\n/**\r\n * Call each frame to animate grass blades.\r\n * @param mesh The patch of grass mesh returned from createMesh\r\n * @param time Time in seconds\r\n * @param x X coordinate of centre position to draw at\r\n * @param y Y coord\r\n */\r\nexport function update(\r\n  mesh, time,\r\n  camPos, camDir, drawPos\r\n) {\r\n  const mat = mesh.material;\r\n  mat.uniforms.time.value = time;\r\n  let p = mat.uniforms.camDir.value;\r\n  p[0] = camDir.x;\r\n  p[1] = camDir.y;\r\n  p[2] = camDir.z;\r\n  p = mat.uniforms.drawPos.value;\r\n  p[0] = drawPos.x;\r\n  p[1] = drawPos.y;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/grass.js","'use strict';\r\n\r\nimport {\r\n  clamp,\r\n  sign\r\n} from '@/helpers/gmath';\r\nimport {\r\n  Vec2,\r\n  Vec3\r\n} from '@/helpers/vec';\r\nimport * as input from '@/helpers/input';\r\nimport notify from '@/helpers/notification';\r\nimport * as heightfield from '@/helpers/heightfield';\r\nimport * as log from '@/helpers/logger';\r\n\r\nconst DEFAULT_HEIGHT = 0.0;\r\nconst MIN_HEIGHT = 2.5;\r\nconst MAX_HEIGHT = 275.0;\r\nconst FLOAT_VEL = 0.75;\r\nconst BOB_RANGE = 16.0;\r\nconst DEFAULT_PITCH = -0.325;\r\nconst MOVE_RANGE = 1500.0;\r\n\r\nconst ACCEL = 90.0; // forward accel\r\nconst DRAG = 0.1;\r\nconst VACCEL = 60.0; // vertical accel\r\nconst VDRAG = 5.0;\r\nconst YAW_ACCEL = 4.0; // angular accel (yaw)\r\nconst YAW_DRAG = 2.0;\r\nconst PITCH_ACCEL = 4.0;\r\nconst PITCH_RESIST = 16.0;\r\nconst PITCH_FRIC = 8.0;\r\nconst ROLL_ACCEL = 2.0;\r\nconst ROLL_RESIST = 10.0;\r\nconst ROLL_FRIC = 8.0;\r\n\r\nconst MAN_VEL = 40.0;\r\nconst MAN_ZVEL = 10.0;\r\nconst MAN_YAWVEL = 0.5;\r\nconst MAN_PITCHVEL = 0.5;\r\nconst MAN_MAXPITCH = Math.PI / 4.0;\r\n\r\nconst MODE_AUTO = 0;\r\nconst MODE_FLY = 1;\r\nconst MODE_MAN = 2;\r\nconst NUM_MODES = 3;\r\n\r\n/** Creates a Player instance (User first person camera) */\r\nexport default function Player(heightField, waterHeight) {\r\n\r\n  //let autoplay = true\r\n  let mode = MODE_MAN;\r\n  let curT = 0;\r\n\r\n  const state = {\r\n    pos: Vec3.create(0.0, 0.0, DEFAULT_HEIGHT),\r\n    vel: Vec3.create(0.0, 0.0, 0.0),\r\n    dir: Vec3.create(1.0, 0.0, 0.0),\r\n    yaw: 0.0,\r\n    yawVel: 0.0,\r\n    pitch: 0.0,\r\n    pitchVel: 0.0,\r\n    roll: 0.0,\r\n    rollVel: 0.0,\r\n    floatHeight: 0.0\r\n  };\r\n\r\n  input.setKeyPressListener(13, function () {\r\n    console.log('Hit');\r\n    nextMode();\r\n    if (mode === MODE_AUTO) {\r\n      log.hide();\r\n      notify('Press ENTER to change camera');\r\n    } else if (mode === MODE_FLY) {\r\n      notify('ARROWS drive, W/S move up/down.');\r\n    } else if (mode === MODE_MAN) {\r\n      log.show();\r\n      notify('ARROWS move, W/S move up/down, Q/A look up/down');\r\n    }\r\n  });\r\n\r\n  // scratchpad vectors\r\n  const _a = Vec3.create();\r\n  const _d = Vec3.create();\r\n  const _p1 = Vec3.create();\r\n  const _p2 = Vec3.create();\r\n  const _p3 = Vec3.create();\r\n\r\n  /**\r\n   * @param dt Delta time in ms\r\n   */\r\n  function update(dt) {\r\n    curT += dt;\r\n    // Update auto or manual\r\n    if (mode === MODE_AUTO) {\r\n      updateAuto(curT / 1000.0, dt);\r\n    } else if (mode === MODE_FLY) {\r\n      updateDrone(input.state, dt);\r\n    } else if (mode === MODE_MAN) {\r\n      updateManual(input.state, dt);\r\n    }\r\n    // Calc cam look direction vector\r\n    const d = state.dir;\r\n    d.z = Math.sin(state.pitch);\r\n    const s = (1.0 - Math.abs(d.z));\r\n    d.x = Math.cos(state.yaw) * s;\r\n    d.y = Math.sin(state.yaw) * s;\r\n  }\r\n\r\n  function nextMode() {\r\n    mode = (mode + 1) % NUM_MODES;\r\n    if (mode === MODE_MAN) {\r\n      state.roll = 0;\r\n      state.rollVel = 0;\r\n      state.pitchVel = 0;\r\n      state.yawVel = 0;\r\n    }\r\n  }\r\n\r\n  function getMode() {\r\n    return mode;\r\n  }\r\n\r\n  /**\r\n   * Update autoplay camera\r\n   * @param time Time in seconds\r\n   */\r\n  function updateAuto(time, dt) {\r\n    const ft = dt / 1000.0;\r\n\r\n    // Remember last frame values\r\n    Vec3.copy(state.pos, _a);\r\n    const yaw0 = state.yaw;\r\n    const pitch0 = state.pitch;\r\n\r\n    // Follow a nice curvy path...\r\n    //state.pos.x = Math.cos(r) * MOVE_RANGE + Math.sin(r) * MOVE_RANGE * 2.0\r\n    //state.pos.y = Math.sin(r) * MOVE_RANGE + Math.cos(r) * MOVE_RANGE * 2.0\r\n    autoPos(time * 0.01, state.pos);\r\n    // Look ahead a few steps so we can see if there are\r\n    // sudden height increases to look for\r\n    autoPos((time + 1.0) * 0.01, _p1);\r\n    autoPos((time + 2.0) * 0.01, _p2);\r\n    autoPos((time + 3.0) * 0.01, _p3);\r\n\r\n    // Move up & down smoothly\r\n    const a = time * 0.3;\r\n    state.pos.z = BOB_RANGE + Math.cos(a) * BOB_RANGE;\r\n    // Look up & down depending on height\r\n    state.pitch = DEFAULT_PITCH - 0.25 * Math.sin(a + Math.PI * 0.5);\r\n\r\n    // Turn left & right smoothly over time\r\n    state.yaw = Math.sin(time * 0.04) * Math.PI * 2.0 + Math.PI * 0.5;\r\n\r\n    // Actual height at camera\r\n    const groundHeight = Math.max(\r\n      heightfield.heightAt(heightField, state.pos.x, state.pos.y, true),\r\n      waterHeight\r\n    );\r\n    // Look ahead heights\r\n    const h1 = Math.max(\r\n      heightfield.heightAt(heightField, _p1.x, _p1.y, true),\r\n      waterHeight\r\n    );\r\n    const h2 = Math.max(\r\n      heightfield.heightAt(heightField, _p2.x, _p2.y, true),\r\n      waterHeight\r\n    );\r\n    const h3 = Math.max(\r\n      heightfield.heightAt(heightField, _p3.x, _p3.y, true),\r\n      waterHeight\r\n    );\r\n    //let minHeight = (groundHeight + h1 + h2 + h3) / 4.0\r\n    let minHeight = Math.max(Math.max(Math.max(groundHeight, h1), h2), h3);\r\n    let floatVel = (state.floatHeight < minHeight) ?\r\n      (minHeight - state.floatHeight) : (groundHeight - state.floatHeight);\r\n    if (floatVel < 0) {\r\n      floatVel *= 0.25; // can sink more slowly\r\n    }\r\n    state.floatHeight += floatVel * FLOAT_VEL * ft;\r\n    // Make absolutely sure we're above ground\r\n    if (state.floatHeight < groundHeight)\r\n      state.floatHeight = groundHeight;\r\n    state.pos.z += state.floatHeight + MIN_HEIGHT;\r\n\r\n    // Calc velocities based on difs from prev frame\r\n    _d.x = state.pos.x - _a.x;\r\n    _d.y = state.pos.y - _a.y;\r\n    _d.z = state.pos.z - _a.z;\r\n    state.vel.x = _d.x / ft;\r\n    state.vel.y = _d.y / ft;\r\n    state.vel.z = _d.z / ft;\r\n    const dyaw = state.yaw - yaw0;\r\n    state.yawVel = dyaw / ft;\r\n    const dpitch = state.pitch - pitch0;\r\n    state.pitchVel = dpitch / ft;\r\n  }\r\n\r\n  function autoPos(r, p) {\r\n    p.x = Math.cos(r) * MOVE_RANGE + Math.sin(r) * MOVE_RANGE * 2.0;\r\n    p.y = Math.sin(r) * MOVE_RANGE + Math.cos(r) * MOVE_RANGE * 2.0;\r\n  }\r\n\r\n  /**\r\n   * Drone-like physics\r\n   */\r\n  function updateDrone(i, dt) {\r\n    // Delta time in seconds\r\n    const ft = dt / 1000.0;\r\n\r\n    // calc roll accel\r\n    let ra = 0;\r\n    if (i.left > 0) {\r\n      ra = -ROLL_ACCEL;\r\n    } else if (i.right > 0) {\r\n      ra = ROLL_ACCEL;\r\n    }\r\n    // calc roll resist forces\r\n    let rr = -state.roll * ROLL_RESIST;\r\n    let rf = -sign(state.rollVel) * ROLL_FRIC * Math.abs(state.rollVel);\r\n    // total roll accel\r\n    ra = ra + rr + rf;\r\n    state.rollVel += ra * ft;\r\n    state.roll += state.rollVel * ft;\r\n\r\n    // Calc yaw accel\r\n    let ya = -state.roll * YAW_ACCEL;\r\n    // yaw drag\r\n    let yd = -sign(state.yawVel) * Math.abs(Math.pow(state.yawVel, 3.0)) * YAW_DRAG;\r\n    // update yaw\r\n    state.yawVel += (ya + yd) * ft;\r\n    state.yaw += state.yawVel * ft;\r\n\r\n    // Calc pitch accel\r\n    let pa = 0;\r\n    if (i.forward > 0) {\r\n      pa = -PITCH_ACCEL;\r\n    } else if (i.back > 0) {\r\n      pa = PITCH_ACCEL * 0.5;\r\n    }\r\n    // Calc pitch resist forces\r\n    let pr = -state.pitch * PITCH_RESIST;\r\n    let pf = -sign(state.pitchVel) * PITCH_FRIC * Math.abs(state.pitchVel);\r\n    // total pitch accel\r\n    pa = pa + pr + pf;\r\n    state.pitchVel += pa * ft;\r\n    state.pitch += state.pitchVel * ft;\r\n\r\n    // Calc accel vector\r\n    Vec3.set(_a, 0, 0, 0);\r\n    _a.x = -state.pitch * ACCEL * Math.cos(state.yaw);\r\n    _a.y = -state.pitch * ACCEL * Math.sin(state.yaw);\r\n    // Calc drag vector (horizontal)\r\n    const absVel = Vec2.length(state.vel); // state.vel.length()\r\n    _d.x = -state.vel.x;\r\n    _d.y = -state.vel.y;\r\n    Vec2.setLength(_d, absVel * DRAG, _d);\r\n\r\n    // Calc vertical accel\r\n    if (i.up > 0 && state.pos.z < MAX_HEIGHT - 2.0) {\r\n      _a.z = VACCEL;\r\n    } else if (i.down > 0 && state.pos.z > MIN_HEIGHT) {\r\n      _a.z = -VACCEL;\r\n    }\r\n    _d.z = -state.vel.z * VDRAG;\r\n\r\n    // update vel\r\n    state.vel.x += (_a.x + _d.x) * ft;\r\n    state.vel.y += (_a.y + _d.y) * ft;\r\n    state.vel.z += (_a.z + _d.z) * ft;\r\n    // update pos\r\n    state.pos.x += state.vel.x * ft;\r\n    state.pos.y += state.vel.y * ft;\r\n    state.pos.z += state.vel.z * ft;\r\n    const groundHeight = Math.max(\r\n      heightfield.heightAt(heightField, state.pos.x, state.pos.y, true),\r\n      waterHeight\r\n    );\r\n    if (state.pos.z < groundHeight + MIN_HEIGHT) {\r\n      state.pos.z = groundHeight + MIN_HEIGHT;\r\n    } else if (state.pos.z > MAX_HEIGHT) {\r\n      state.pos.z = MAX_HEIGHT;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Manual movement\r\n   */\r\n  function updateManual(i, dt) {\r\n    const ft = dt / 1000.0;\r\n\r\n    state.yawVel = 0;\r\n    if (i.left) {\r\n      state.yawVel = MAN_YAWVEL;\r\n    } else if (i.right) {\r\n      state.yawVel = -MAN_YAWVEL;\r\n    }\r\n    state.yaw += state.yawVel * ft;\r\n\r\n    state.pitchVel = 0;\r\n    if (i.pitchup) {\r\n      state.pitchVel = MAN_PITCHVEL;\r\n    } else if (i.pitchdown) {\r\n      state.pitchVel = -MAN_PITCHVEL;\r\n    }\r\n    state.pitch += state.pitchVel * ft;\r\n    state.pitch = clamp(state.pitch, -MAN_MAXPITCH, MAN_MAXPITCH);\r\n\r\n    Vec3.set(state.vel, 0, 0, 0);\r\n    if (i.forward) {\r\n      state.vel.x = MAN_VEL * Math.cos(state.yaw);\r\n      state.vel.y = MAN_VEL * Math.sin(state.yaw);\r\n    } else if (i.back) {\r\n      state.vel.x = -MAN_VEL * Math.cos(state.yaw);\r\n      state.vel.y = -MAN_VEL * Math.sin(state.yaw);\r\n    }\r\n    state.pos.x += state.vel.x * ft;\r\n    state.pos.y += state.vel.y * ft;\r\n\r\n    if (i.up) {\r\n      state.vel.z = MAN_ZVEL;\r\n    } else if (i.down) {\r\n      state.vel.z = -MAN_ZVEL;\r\n    }\r\n    state.pos.z += state.vel.z * ft;\r\n\r\n    const groundHeight = Math.max(\r\n      heightfield.heightAt(heightField, state.pos.x, state.pos.y, true),\r\n      waterHeight\r\n    );\r\n\r\n    if (state.pos.z < groundHeight + MIN_HEIGHT) {\r\n      state.pos.z = groundHeight + MIN_HEIGHT;\r\n    } else if (state.pos.z > MAX_HEIGHT) {\r\n      state.pos.z = MAX_HEIGHT;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Public interface\r\n   */\r\n  return {\r\n    update: update,\r\n    state: state,\r\n    getMode: getMode,\r\n    nextMode: nextMode\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/player.js","'use strict';\r\n\r\nimport {\r\n  $e\r\n} from '@/helpers/util';\r\nimport * as anim from '@/helpers/anim';\r\n\r\nlet notifying = false;\r\n\r\nexport default function notify(msg) {\r\n  const elTxt = $e('notification_text');\r\n  elTxt.textContent = msg;\r\n  if (notifying) return;\r\n  const el = $e('notification');\r\n  el.style.display = 'block';\r\n  el.style.opacity = '1.0';\r\n  notifying = true;\r\n  setTimeout(function () {\r\n    anim.fadeOut(el, 1000, function () {\r\n      el.style.display = 'none';\r\n      elTxt.textContent = '';\r\n      notifying = false;\r\n    });\r\n  }, 4000);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/notification.js","/**\r\n * Create instance of Frames Per Second Monitor\r\n */\r\nexport function FPSMonitor(num = 16) {\r\n  let ticks = new Array(num);\r\n  let sum = 0;\r\n  let index = 0;\r\n  let f = 60.0; // frames per sec initial assumption\r\n  for (let i = 0; i < num; ++i) {\r\n    ticks[i] = 16.66666667;\r\n    sum += 16.66666667;\r\n  }\r\n\r\n  /**\r\n   *  Update with new sample\r\n   *  @return New average frames/second\r\n   */\r\n  function update(dt) {\r\n    sum -= ticks[index];\r\n    sum += dt;\r\n    ticks[index] = dt;\r\n    index = (index + 1) % num;\r\n    f = 1000 * num / sum;\r\n    return f;\r\n  }\r\n\r\n  /** @return current fps string formatted to 1 decimal place */\r\n  function fps() {\r\n    return f.toFixed(1);\r\n  }\r\n\r\n  return {\r\n    update,\r\n    fps\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/fps.js","'use strict';\r\n\r\nexport const PI2 = Math.PI * 2.0;\r\n\r\nexport function sign (n) {\r\n\treturn (n > 0 ? 1 : n < 0 ? -1 : 0);\r\n}\r\n\r\nexport function roundFrac(n, places) {\r\n\tconst d = Math.pow(10, places);\r\n\treturn Math.round((n + 0.000000001) * d) / d;\r\n}\r\n\r\nexport function clamp (n, min, max) {\r\n\treturn Math.min(Math.max(n, min), max);\r\n}\r\n\r\n/**  Always positive modulus */\r\nexport function pmod (n, m) {\r\n\treturn ((n % m + m) % m);\r\n}\r\n\r\n/** A random number from -1.0 to 1.0 */\r\nexport function nrand() {\r\n\treturn Math.random() * 2.0 - 1.0;\r\n}\r\n\r\nexport function angle (x, y) {\r\n\treturn pmod(Math.atan2(y, x), PI2);\r\n}\r\n\r\nexport function difAngle (a0, a1) {\r\n\tconst r = pmod(a1, PI2) - pmod(a0, PI2);\r\n\treturn Math.abs(r) < Math.PI ? r : r - PI2 * sign(r);\r\n}\r\n\r\nexport function dot (x0, y0, x1, y1) {\r\n\treturn (x0 * x1 + y0 * y1);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/gmath.js","var escape = require(\"../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*! Generated by Font Squirrel (https://www.fontsquirrel.com) on April 23, 2018 */@font-face{font-family:Narkism;src:url(\" + escape(require(\"../../assets/fonts/nrkis-webfont.eot\")) + \");src:url(\" + escape(require(\"../../assets/fonts/nrkis-webfont.eot\")) + \"?#iefix) format(\\\"embedded-opentype\\\"),url(\" + escape(require(\"../../assets/fonts/nrkis-webfont.woff2\")) + \") format(\\\"woff2\\\"),url(\" + escape(require(\"../../assets/fonts/nrkis-webfont.woff\")) + \") format(\\\"woff\\\"),url(\" + escape(require(\"../../assets/fonts/nrkis-webfont.ttf\")) + \") format(\\\"truetype\\\"),url(\" + escape(require(\"../../assets/fonts/nrkis-webfont.svg\")) + \"#narkisimregular) format(\\\"svg\\\");font-weight:400;font-style:normal}#app-background{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}#app-background canvas{width:100%;height:100%}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true,\"importLoaders\":1,\"alias\":{\"/assets\":\"C://Users//djalx//Desktop//thevgc//assets\",\"/static\":\"C://Users//djalx//Desktop//thevgc//static\"}}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"scoped\":false,\"sourceMap\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./components/App/AppBackground.vue\n// module id = jieY\n// module chunks = 6","'use strict';\r\nimport * as THREE from 'three';\r\nexport default function create(\r\n  tex, radius, lats = 16, lngs = 32\r\n) {\r\n  tex.wrapS = tex.wrapT = THREE.RepeatWrapping;\r\n  return new THREE.Mesh(\r\n    new THREE.SphereGeometry(\r\n      radius, lngs, lats, 0, Math.PI * 2.0, 0, Math.PI / 2.0\r\n    ).rotateX(Math.PI / 2.0).rotateZ(Math.PI),\r\n\r\n    new THREE.MeshBasicMaterial({\r\n      color: 0xFFFFFF,\r\n      side: THREE.BackSide,\r\n      map: tex,\r\n      fog: false\r\n    })\r\n  );\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/skydome.js","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { ref: \"container\", attrs: { id: \"app-background\" } }, [\n    _c(\"canvas\", { attrs: { id: \"app-canvas\" } })\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\nexport { render, staticRenderFns }\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n    require(\"vue-hot-reload-api\")      .rerender(\"data-v-0e175888\", { render: render, staticRenderFns: staticRenderFns })\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0e175888\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./components/App/AppBackground.vue\n// module id = pC51\n// module chunks = 6","'use strict';\r\n\r\nimport {\r\n  pmod\r\n} from '@/helpers/gmath';\r\n\r\nimport {\r\n  Vec3\r\n} from '@/helpers/vec';\r\n\r\n\r\n///////////////////////////////////////////////////////////\r\n\r\n/**\r\n *  Calculate normals.\r\n *  2 face normals per quad (1 per tri)\r\n */\r\nfunction calcFaceNormals(hf) {\r\n  const csz = hf.cellSize,\r\n    xc = hf.xCount, // tile X & Y counts\r\n    yc = hf.yCount,\r\n    hxc = hf.xCount + 1, // height X count (1 larger than tile count)\r\n    heights = hf.heights, // 1 less indirection\r\n    normals = hf.faceNormals,\r\n    v0 = Vec3.create(),\r\n    v1 = Vec3.create(),\r\n    n = Vec3.create(); // used to compute normals\r\n  let i = 0;\r\n\r\n  const tStart = Date.now();\r\n  for (let iy = 0; iy < yc; ++iy) {\r\n    for (let ix = 0; ix < xc; ++ix) {\r\n      i = 6 * (ix + iy * xc);\r\n      const ih = ix + iy * hxc;\r\n      const z = heights[ih];\r\n\r\n      // 2 vectors of top-left tri\r\n      v0.x = csz;\r\n      v0.y = csz;\r\n      v0.z = heights[ih + hxc + 1] - z;\r\n\r\n      v1.x = 0.0;\r\n      v1.y = csz;\r\n      v1.z = heights[ih + hxc] - z;\r\n\r\n      Vec3.cross(v0, v1, n);\r\n      Vec3.normalize(n, n);\r\n      normals[i + 0] = n.x;\r\n      normals[i + 1] = n.y;\r\n      normals[i + 2] = n.z;\r\n\r\n      // 2 vectors of bottom-right tri\r\n      v0.x = csz;\r\n      v0.y = 0.0;\r\n      v0.z = heights[ih + 1] - z;\r\n\r\n      v1.x = csz;\r\n      v1.y = csz;\r\n      v1.z = heights[ih + hxc + 1] - z;\r\n\r\n      Vec3.cross(v0, v1, n);\r\n      Vec3.normalize(n, n);\r\n      normals[i + 3] = n.x;\r\n      normals[i + 4] = n.y;\r\n      normals[i + 5] = n.z;\r\n    }\r\n  }\r\n  const dt = Date.now() - tStart;\r\n  console.log('computed ' + i + ' heightfield face normals in ' + dt + 'ms');\r\n}\r\n\r\n/**\r\n * Compute a vertex normal by averaging the adjacent face normals.\r\n */\r\nfunction computeVertexNormal(hf, vx, vy, n) {\r\n  const fnorms = hf.faceNormals;\r\n  // This vertex is belongs to 4 quads\r\n  // Do the faces this vertex is the 1st point of for this quad.\r\n  // This is the quad up and to the right\r\n  let qx = vx % hf.xCount;\r\n  let qy = vy % hf.yCount;\r\n  let ni = (qy * hf.xCount + qx) * 3 * 2;\r\n  n.x = fnorms[ni + 0];\r\n  n.y = fnorms[ni + 1];\r\n  n.z = fnorms[ni + 2];\r\n  ni += 3;\r\n  n.x += fnorms[ni + 0];\r\n  n.y += fnorms[ni + 1];\r\n  n.z += fnorms[ni + 2];\r\n\r\n  // 2nd tri of quad up and to the left\r\n  qx = pmod(qx - 1, hf.xCount);\r\n  ni = (qy * hf.xCount + qx) * 3 * 2 + 3;\r\n  n.x += fnorms[ni + 0];\r\n  n.y += fnorms[ni + 1];\r\n  n.z += fnorms[ni + 2];\r\n\r\n  // both tris of quad down and to the left\r\n  qy = pmod(qy - 1, hf.yCount);\r\n  ni = (qy * hf.xCount + qx) * 3 * 2;\r\n  n.x += fnorms[ni + 0];\r\n  n.y += fnorms[ni + 1];\r\n  n.z += fnorms[ni + 2];\r\n  ni += 3;\r\n  n.x += fnorms[ni + 0];\r\n  n.y += fnorms[ni + 1];\r\n  n.z += fnorms[ni + 2];\r\n\r\n  // 1st tri of quad down and to the right\r\n  qx = (qx + 1) % hf.xCount;\r\n  ni = (qy * hf.xCount + qx) * 3 * 2;\r\n  n.x += fnorms[ni + 0];\r\n  n.y += fnorms[ni + 1];\r\n  n.z += fnorms[ni + 2];\r\n\r\n  // Normalize to 'average' the result normal\r\n  Vec3.normalize(n, n);\r\n}\r\n\r\nfunction calcVertexNormals(hf) {\r\n  const vnorms = hf.vtxNormals;\r\n  const w = hf.xCount + 1;\r\n  const h = hf.yCount + 1;\r\n  const n = Vec3.create();\r\n  let i = 0;\r\n  const tStart = Date.now();\r\n  for (let y = 0; y < h; ++y) {\r\n    for (let x = 0; x < w; ++x) {\r\n      computeVertexNormal(hf, x, y, n);\r\n      i = (y * w + x) * 3;\r\n      vnorms[i++] = n.x;\r\n      vnorms[i++] = n.y;\r\n      vnorms[i++] = n.z;\r\n    }\r\n  }\r\n  const dt = Date.now() - tStart;\r\n  console.log('computed ' + (w * h) + ' vertex normals in ' + dt + 'ms');\r\n}\r\n\r\n/**\r\n * Generate heightfield from bitmap data. Lighter pixel colours are higher.\r\n */\r\nfunction genFromImg(\r\n  image, hf\r\n) {\r\n  let x, y, i, height,\r\n    w = image.width,\r\n    h = image.height,\r\n    heightRange = hf.maxHeight - hf.minHeight;\r\n\r\n  hf.xCount = w - 1;\r\n  hf.yCount = h - 1;\r\n  hf.xSize = hf.xCount * hf.cellSize;\r\n  hf.ySize = hf.yCount * hf.cellSize;\r\n\r\n  // Draw to a canvas so we can get the data\r\n  let canvas = document.createElement('canvas');\r\n  canvas.width = w;\r\n  canvas.height = h;\r\n  let ctx = canvas.getContext('2d');\r\n  ctx.drawImage(image, 0, 0, w, h);\r\n  // array of canvas pixel data [r,g,b,a, r,g,b,a, ...]\r\n  let data = ctx.getImageData(0, 0, w, h).data;\r\n  const heights = new Float32Array(w * h);\r\n  for (y = 0; y < h; ++y) {\r\n    for (x = 0; x < w; ++x) {\r\n      // flip vertical because textures are Y+\r\n      i = (x + (h - y - 1) * w) * 4;\r\n      //i = (x + y * w) * 4\r\n\r\n      // normalized altitude value (0-1)\r\n      // assume image is grayscale, so we only need 1 color component\r\n      height = data[i] / 255.0;\r\n      //height = (data[i+0] + data[i+1] + data[i+2]) / (255+255+255)\r\n\r\n      //  scale & store this altitude\r\n      heights[x + y * w] = hf.minHeight + height * heightRange;\r\n    }\r\n  }\r\n  // Free these resources soon as possible\r\n  data = ctx = canvas = null;\r\n\r\n  hf.heights = heights;\r\n\r\n  // 2 normals per cell (quad)\r\n  hf.faceNormals = new Float32Array(3 * 2 * hf.xCount * hf.yCount);\r\n  hf.vtxNormals = new Float32Array(3 * (hf.xCount + 1) * (hf.yCount + 1));\r\n  calcFaceNormals(hf);\r\n  calcVertexNormals(hf);\r\n}\r\n\r\n/**\r\n * Create a Heightfield using the given options.\r\n * Use either an image OR xCount, yCount and a heights array.\r\n */\r\nexport function create(info) {\r\n  const hf = {\r\n    cellSize: (info.cellSize && info.cellSize > 0) ? info.cellSize : 1.0,\r\n    minHeight: (typeof info.minHeight === 'number') ? info.minHeight : 0.0,\r\n    maxHeight: (typeof info.maxHeight === 'number') ? info.maxHeight : 1.0,\r\n    xCount: 0, // remaining will be computed later\r\n    yCount: 0,\r\n    xSize: 0,\r\n    ySize: 0,\r\n    heights: new Float32Array(0),\r\n    faceNormals: new Float32Array(0), // packed: [x0, y0, z0, x1, y1, z1]\r\n    vtxNormals: new Float32Array(0)\r\n  };\r\n\r\n  if (info.image) {\r\n    genFromImg(info.image, hf);\r\n  } else {\r\n    hf.xCount = info.xCount && info.xCount > 0 ? Math.floor(info.xCount) : 1;\r\n    hf.yCount = info.yCount && info.yCount > 0 ? Math.floor(info.yCount) : 1;\r\n    hf.xSize = hf.xCount * hf.cellSize;\r\n    hf.ySize = info.yCount * hf.cellSize;\r\n    hf.heights = info.heights || new Float32Array((hf.xCount + 1) * (hf.yCount + 1));\r\n    // 2 normals per cell (quad);\r\n    hf.faceNormals = new Float32Array(3 * 2 * hf.xCount * hf.yCount);\r\n    hf.vtxNormals = new Float32Array(3 * (hf.xCount + 1) * (hf.yCount + 1));\r\n    calcFaceNormals(hf);\r\n  }\r\n\r\n  return hf;\r\n}\r\n\r\n/**\r\n *  Given a plane with normal n and z=z0 at (x=0,y=0) find z at x,y.\r\n *  @param n Normal vector of the plane.\r\n *  @param z0 Height (z) coordinate of the plane at x=0,y=0.\r\n *  @param x X coordinate to find height (z) at.\r\n *  @param y Y coordinate to find height (z) at.\r\n */\r\nexport function getPlaneZ(n, z0, x, y) {\r\n  return z0 - (n.x * x + n.y * y) / n.z;\r\n}\r\n\r\n/**\r\n * Get heightfield info at point x,y. Outputs to hi.\r\n * @param wrap If true, x,y coords will be wrapped around if out of bounds,\r\n *             otherwise minHeight returned.\r\n * @param hi Struct to output result into.\r\n */\r\nexport function infoAt(hf, x, y, wrap, hi) {\r\n  const ox = -(hf.xSize / 2.0); // bottom left of heightfield\r\n  const oy = -(hf.ySize / 2.0);\r\n\r\n  if (x < ox || x >= -ox || y < oy || y >= -oy) {\r\n    if (!wrap) {\r\n      // out of bounds\r\n      hi.i = -1;\r\n      hi.z = hf.minHeight;\r\n      hi.n.x = hi.n.y = hi.n.z = 0;\r\n      hi.t = 0;\r\n      return;\r\n    }\r\n    // wrap around\r\n    x = pmod(x - ox, hf.xSize) + ox;\r\n    y = pmod(y - oy, hf.ySize) + oy;\r\n  }\r\n\r\n  const csz = hf.cellSize,\r\n    normals = hf.faceNormals,\r\n    n = hi.n,\r\n    ix = Math.floor((x - ox) / csz),\r\n    iy = Math.floor((y - oy) / csz),\r\n    ih = ix + iy * (hf.xCount + 1), // height index\r\n    px = (x - ox) % csz, // relative x,y within this quad\r\n    py = (y - oy) % csz;\r\n\r\n  const i = ix + iy * hf.xCount; // tile index\r\n\r\n  if (py > 0 && px / py < 1.0) {\r\n    // top left tri\r\n    hi.t = 0;\r\n    n.x = normals[i * 6 + 0];\r\n    n.y = normals[i * 6 + 1];\r\n    n.z = normals[i * 6 + 2];\r\n  } else {\r\n    // bottom right tri\r\n    hi.t = 1;\r\n    n.x = normals[i * 6 + 3];\r\n    n.y = normals[i * 6 + 4];\r\n    n.z = normals[i * 6 + 5];\r\n  }\r\n  hi.i = i;\r\n  hi.z = getPlaneZ(n, hf.heights[ih], px, py);\r\n}\r\n\r\n// pre-allocated scratchpad object\r\nconst _hi = {\r\n  i: 0,\r\n  t: 0,\r\n  z: 0.0,\r\n  n: Vec3.create()\r\n};\r\n\r\n\r\n/**\r\n * Get height (z) at x,y\r\n * @param wrap If true, x,y coords will be wrapped around if out of bounds,\r\n *             otherwise minHeight returned.\r\n */\r\nexport function heightAt(hf, x, y, wrap = false) {\r\n  infoAt(hf, x, y, wrap, _hi);\r\n  return _hi.z;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/heightfield.js","'use strict';\r\n// Vector Math with library-agnostic interface types.\r\n// i.e. Any object with matching property names will work,\r\n// whether three.js, cannon.js, etc.\r\n//\r\n// LICENSE: MIT\r\n// Copyright (c) 2016 by Mike Linkovich\r\n\r\n\r\n\r\n/**\r\n * 3D Vector functions\r\n */\r\nexport const Vec2 = {\r\n  create(x, y) {\r\n    return {\r\n      x: (typeof x === 'number') ? x : 0.0,\r\n      y: (typeof y === 'number') ? y : 0.0\r\n    };\r\n  },\r\n\r\n  clone(v) {\r\n    return Vec2.create(v.x, v.y);\r\n  },\r\n\r\n  set(v, x, y) {\r\n    v.x = x;\r\n    v.y = y;\r\n  },\r\n\r\n  copy(src, out) {\r\n    out.x = src.x;\r\n    out.y = src.y;\r\n  },\r\n\r\n  length(v) {\r\n    return Math.sqrt(v.x * v.x + v.y * v.y);\r\n  },\r\n\r\n  setLength(v, l, out) {\r\n    let s = Vec2.length(v);\r\n    if (s > 0.0) {\r\n      s = l / s;\r\n      out.x = v.x * s;\r\n      out.y = v.y * s;\r\n    } else {\r\n      out.x = l;\r\n      out.y = 0.0;\r\n    }\r\n  },\r\n\r\n  dist(v0, v1) {\r\n    const dx = v1.x - v0.x;\r\n    const dy = v1.y - v0.y;\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n  },\r\n\r\n  normalize(v, out) {\r\n    Vec2.setLength(v, 1.0, out);\r\n  },\r\n\r\n  dot(v0, v1) {\r\n    return (v0.x * v1.x + v0.y * v1.y);\r\n  },\r\n\r\n  det(v0, v1) {\r\n    return (v0.x * v1.y - v0.y * v1.x);\r\n  },\r\n\r\n  /** Rotate v by r radians, result in out. (v and out can reference the same Vec2 object) */\r\n  rotate(v, r, out) {\r\n    const c = Math.cos(r),\r\n      s = Math.sin(r),\r\n      x = v.x,\r\n      y = v.y;\r\n    out.x = x * c - y * s;\r\n    out.y = x * s + y * c;\r\n  },\r\n\r\n  /** Uses pre-computed cos & sin values of rotation angle */\r\n  rotateCS(v, c, s, out) {\r\n    const x = v.x,\r\n      y = v.y;\r\n    out.x = x * c - y * s;\r\n    out.y = x * s + y * c;\r\n  },\r\n\r\n  /** nx,ny should be normalized; vx,vy length will be preserved */\r\n  reflect(v, n, out) {\r\n    const d = Vec2.dot(n, v);\r\n    out.x = v.x - 2.0 * d * n.x;\r\n    out.y = v.y - 2.0 * d * n.y;\r\n  },\r\n\r\n  toArray(v) {\r\n    return [v.x, v.y];\r\n  }\r\n};\r\n\r\n/**\r\n * 3D Vector functions\r\n */\r\nexport const Vec3 = {\r\n  create(x, y, z) {\r\n    return {\r\n      x: (typeof x === 'number') ? x : 0.0,\r\n      y: (typeof y === 'number') ? y : 0.0,\r\n      z: (typeof z === 'number') ? z : 0.0\r\n    };\r\n  },\r\n\r\n  clone(v) {\r\n    return Vec3.create(v.x, v.y, v.z);\r\n  },\r\n\r\n  set(v, x, y, z) {\r\n    v.x = x;\r\n    v.y = y;\r\n    v.z = z;\r\n  },\r\n\r\n  copy(src, out) {\r\n    out.x = src.x;\r\n    out.y = src.y;\r\n    out.z = src.z;\r\n  },\r\n\r\n  length(v) {\r\n    return Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\r\n  },\r\n\r\n  setLength(v, l, out) {\r\n    let s = Vec3.length(v);\r\n    if (s > 0.0) {\r\n      s = l / s;\r\n      out.x = v.x * s;\r\n      out.y = v.y * s;\r\n      out.z = v.z * s;\r\n    } else {\r\n      out.x = l;\r\n      out.y = 0.0;\r\n      out.z = 0.0;\r\n    }\r\n  },\r\n\r\n  dist(v0, v1) {\r\n    const dx = v1.x - v0.x;\r\n    const dy = v1.y - v0.y;\r\n    const dz = v1.z - v0.z;\r\n    return Math.sqrt(dx * dx + dy * dy + dz * dz);\r\n  },\r\n\r\n  normalize(v, out) {\r\n    Vec3.setLength(v, 1.0, out);\r\n  },\r\n\r\n  dot(a, b) {\r\n    return a.x * b.x + a.y * b.y + a.z * b.z;\r\n  },\r\n\r\n  cross(a, b, out) {\r\n    const ax = a.x,\r\n      ay = a.y,\r\n      az = a.z,\r\n      bx = b.x,\r\n      by = b.y,\r\n      bz = b.z;\r\n    out.x = ay * bz - az * by;\r\n    out.y = az * bx - ax * bz;\r\n    out.z = ax * by - ay * bx;\r\n  },\r\n\r\n  toArray(v) {\r\n    return [v.x, v.y, v.z];\r\n  }\r\n};\r\n\r\n/**\r\n * RGB Color functions\r\n */\r\nexport const Color = {\r\n  create(r, g, b) {\r\n    return {\r\n      r: (typeof r === 'number') ? r : 0.0,\r\n      g: (typeof g === 'number') ? g : 0.0,\r\n      b: (typeof b === 'number') ? b : 0.0\r\n    };\r\n  },\r\n\r\n  toArray(c) {\r\n    return [c.r, c.g, c.b];\r\n  },\r\n\r\n  to24bit(c) {\r\n    return (c.r * 255) << 16 ^ (c.g * 255) << 8 ^ (c.b * 255) << 0;\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/vec.js","'use strict';\r\n\r\nimport {\r\n  $e\r\n} from '@/helpers/util';\r\n\r\nlet visible = false;\r\n\r\nexport function setText(txt) {\r\n  $e('logger').textContent = txt;\r\n}\r\n\r\nexport function setHtml(html) {\r\n  $e('logger').innerHTML = html;\r\n}\r\n\r\nexport function toggle() {\r\n  const el = $e('logger');\r\n  visible = !visible;\r\n  if (visible) {\r\n    el.style.display = 'inline-block';\r\n  } else {\r\n    el.style.display = 'none';\r\n  }\r\n}\r\n\r\nexport function hide() {\r\n  $e('logger').style.display = 'none';\r\n  visible = false;\r\n}\r\n\r\nexport function show() {\r\n  $e('logger').style.display = 'inline-block';\r\n  visible = true;\r\n}\r\n\r\nexport function isVisible() {\r\n  return visible;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/logger.js"],"sourceRoot":""}